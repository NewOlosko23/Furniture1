import{c as e,_ as s}from"./supabase-vendor-BOp2EyVH.js";import{r as t,u as a,b as i,L as r,c as l,d,N as n,e as o}from"./router-vendor-DfO8ZQAf.js";import{z as c,X as m,L as x,P as g,S as u,U as h,a as p,b,c as f,M as y,d as j,F as v,D as N,A as w,R as _,e as k,f as C,T as S,C as P,g as O,h as D,i as A,E,j as z,k as R,l as $,m as I,n as M,o as T,p as W,q,W as U,B as F,r as L,s as G,t as V,u as B,v as J,w as K,x as Y,y as X,G as H,H as Z,I as Q,J as ee,K as se}from"./ui-vendor-C3HAkryH.js";import{R as te,L as ae,C as ie,X as re,Y as le,T as de,a as ne,P as oe,b as ce,c as me}from"./charts-vendor-D6BWP-Ru.js";var xe,ge,ue={exports:{}},he={};var pe=(ge||(ge=1,ue.exports=function(){if(xe)return he;xe=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function t(s,t,a){var i=null;if(void 0!==a&&(i=""+a),void 0!==t.key&&(i=""+t.key),"key"in t)for(var r in a={},t)"key"!==r&&(a[r]=t[r]);else a=t;return t=a.ref,{$$typeof:e,type:s,key:i,ref:void 0!==t?t:null,props:a}}return he.Fragment=s,he.jsx=t,he.jsxs=t,he}()),ue.exports);const be=(e,s={})=>c.success(e,{duration:4e3,position:"top-right",style:{background:"#10b981",color:"#fff",fontWeight:"500"},iconTheme:{primary:"#fff",secondary:"#10b981"},...s}),fe=(e,s={})=>c.error(e,{duration:5e3,position:"top-right",style:{background:"#ef4444",color:"#fff",fontWeight:"500"},iconTheme:{primary:"#fff",secondary:"#ef4444"},...s}),ye=(e,s={})=>c(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:"500"},...s}),je=(e,s={})=>c.loading(e,{position:"top-right",style:{background:"#6b7280",color:"#fff",fontWeight:"500"},...s}),ve=e("https://mlqrkhdvaenugoerhawr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXJraGR2YWVudWdvZXJoYXdyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1ODM2MTcsImV4cCI6MjA3MzE1OTYxN30.Y-U0y7T2tGLeazXJWc0qAxXKpC7-FO0M4Cbo2mAkgME"),Ne="1.0",we="furniture_cache_",_e={products:{key:"products",ttl:6e5,staleWhileRevalidate:18e5,version:Ne,priority:"high"},categories:{key:"categories",ttl:9e5,staleWhileRevalidate:36e5,version:Ne,priority:"medium"},product:{key:"product",ttl:12e5,staleWhileRevalidate:36e5,version:Ne,priority:"high"},orders:{key:"orders",ttl:3e5,staleWhileRevalidate:9e5,version:Ne,priority:"high"},analytics:{key:"analytics",ttl:3e5,staleWhileRevalidate:9e5,version:Ne,priority:"medium"},chartData:{key:"chartData",ttl:6e5,staleWhileRevalidate:18e5,version:Ne,priority:"medium"},activities:{key:"activities",ttl:12e4,staleWhileRevalidate:6e5,version:Ne,priority:"low"}},ke=(e,s=null)=>{try{const t=_e[e];if(!t)return null;const a=s?`${we}${t.key}_${s}`:`${we}${t.key}`,i=localStorage.getItem(a);if(!i)return null;const r=JSON.parse(i);if(r.version!==t.version)return localStorage.removeItem(a),null;if(Se(r.timestamp,t.staleWhileRevalidate||t.ttl))return localStorage.removeItem(a),null;const l=Se(r.timestamp,t.ttl);return{data:r.data,isStale:l,timestamp:r.timestamp,ttl:t.ttl,staleWhileRevalidate:t.staleWhileRevalidate}}catch(t){return null}},Ce=(e,s,t=null)=>{try{const a=_e[e];if(!a)return;const i=t?`${we}${a.key}_${t}`:`${we}${a.key}`,r={data:s,timestamp:Date.now(),version:a.version,ttl:a.ttl};localStorage.setItem(i,JSON.stringify(r))}catch(a){}},Se=(e,s)=>Date.now()-e>s,Pe=(e,s=null)=>{try{const t=_e[e];if(!t)return;const a=s?`${we}${t.key}_${s}`:`${we}${t.key}`;localStorage.removeItem(a)}catch(t){}},Oe=()=>{try{const e=Object.keys(localStorage).filter(e=>e.startsWith(we));let s=0,t=0,a=0;const i=[];return e.forEach(e=>{const r=localStorage.getItem(e);if(r){const d=new Blob([r]).size;s+=d;try{const s=JSON.parse(r),l=Se(s.timestamp,s.ttl);l?a++:t++,i.push({key:e.replace(we,""),size:d,timestamp:s.timestamp,ttl:s.ttl,version:s.version,isExpired:l,age:Date.now()-s.timestamp})}catch(l){a++}}}),{totalEntries:e.length,validEntries:t,expiredEntries:a,totalSize:s,entries:i.sort((e,s)=>s.timestamp-e.timestamp)}}catch(e){return{totalEntries:0,validEntries:0,expiredEntries:0,totalSize:0,entries:[]}}},De=(e,s=null)=>{const t=ke(e,s);return null!==t&&!t.isStale},Ae=()=>{try{const e=Object.keys(localStorage).filter(e=>e.startsWith(we));let s=0;return e.forEach(e=>{const t=localStorage.getItem(e);t&&(s+=new Blob([t]).size)}),s}catch(e){return 0}},Ee=(e=5242880)=>{try{const s=Ae();if(s<=e)return;const t=Object.keys(localStorage),a=t.filter(e=>e.startsWith(we)).map(e=>{const s=localStorage.getItem(e);if(s)try{const t=JSON.parse(s);return{key:e,size:new Blob([s]).size,timestamp:t.timestamp,priority:_e[t.type]?.priority||"medium"}}catch(t){return null}return null}).filter(Boolean),i={low:0,medium:1,high:2};a.sort((e,s)=>{const t=i[e.priority]-i[s.priority];return 0!==t?t:e.timestamp-s.timestamp});let r=0;for(const l of a)if(localStorage.removeItem(l.key),r+=l.size,s-r<=.8*e)break}catch(s){}},ze=(e={})=>{const[s,a]=t.useState([]),[i,r]=t.useState(!0),[l,d]=t.useState(null),[n,o]=t.useState(null),c=t.useCallback(async(e=!1)=>{try{if(r(!0),d(null),!e){const e=ke("products");if(e)return a(e.data),o(e.timestamp),r(!1),void(e.isStale&&c(!0))}let s=ve.from("products").select("*");s=s.order("id",{ascending:!1});const{data:t,error:i}=await s;if(i)throw i;Ce("products",t),a(t||[]),o(Date.now())}catch(s){d(s.message);const e=ke("products");e&&(a(e.data),o(e.timestamp))}finally{r(!1)}},[]),m=t.useCallback(()=>{c(!0)},[c]);return t.useEffect(()=>{c()},[c]),{products:s,loading:i,error:l,refresh:m,lastUpdated:n}},Re=e=>{const[s,a]=t.useState([]),[i,r]=t.useState(!0),[l,d]=t.useState(null),[n,o]=t.useState(null),c=t.useCallback(async(s=!1)=>{if(!e)return a([]),void r(!1);try{r(!0),d(null);const t=`category_${e.toLowerCase().replace(/\s+/g,"_")}`;if(!s){const e=ke("products",t);if(e)return a(e.data),o(e.timestamp),r(!1),void(e.isStale&&c(!0))}const{data:i,error:l}=await ve.from("products").select("*").eq("category",e).order("id",{ascending:!1});if(l)throw l;Ce("products",i,t),a(i||[]),o(Date.now())}catch(t){d(t.message);const s=`category_${e.toLowerCase().replace(/\s+/g,"_")}`,i=ke("products",s);i&&(a(i.data),o(i.timestamp))}finally{r(!1)}},[e]),m=t.useCallback(()=>{c(!0)},[c]);return t.useEffect(()=>{c()},[c]),{products:s,loading:i,error:l,refresh:m,lastUpdated:n}},$e=e=>{const[s,a]=t.useState(null),[i,r]=t.useState(!0),[l,d]=t.useState(null),[n,o]=t.useState(null),c=t.useCallback(async(s=!1)=>{if(!e)return a(null),void r(!1);try{r(!0),d(null);const t=decodeURIComponent(e);if(!s){const e=ke("product",t);if(e)return a(e.data),o(e.timestamp),r(!1),void(e.isStale&&c(!0))}let i=null,l=null;if(!isNaN(t)||t.match(/^\d+$/)){const e=await ve.from("products").select("*").eq("id",t).single();i=e.data,l=e.error}else{const e=await ve.from("products").select("*").eq("slug",t).single();i=e.data,l=e.error}if(l&&("PGRST116"===l.code||l.message?.includes("No rows found")))if(!isNaN(t)||t.match(/^\d+$/)){const e=await ve.from("products").select("*").eq("slug",t).single();i=e.data,l=e.error}else{const e=await ve.from("products").select("*").eq("id",t).single();i=e.data,l=e.error}if(l&&("PGRST116"===l.code||l.message?.includes("No rows found"))){const{data:e,error:s}=await ve.from("products").select("*");if(!s&&e){const s=e.find(e=>e.name?.toLowerCase().includes(t.toLowerCase())||e.id===t||e.slug===t);s&&(i=s,l=null)}}if(l)throw l;Ce("product",i,t),a(i),o(Date.now())}catch(t){d(t.message);const s=decodeURIComponent(e),i=ke("product",s);i&&(a(i.data),o(i.timestamp))}finally{r(!1)}},[e]),m=t.useCallback(()=>{c(!0)},[c]);return t.useEffect(()=>{c()},[c]),{product:s,loading:i,error:l,refresh:m,lastUpdated:n}},Ie=()=>({invalidateProducts:t.useCallback(()=>{Pe("products")},[]),invalidateProduct:t.useCallback(e=>{Pe("product",e)},[]),invalidateCategories:t.useCallback(()=>{Pe("categories")},[]),invalidateAll:t.useCallback(()=>{Pe("products"),Pe("categories")},[])}),Me=({isOpen:e,onClose:s,title:t,children:a,size:i="md"})=>{if(!e)return null;return pe.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:pe.jsxs("div",{className:"flex min-h-screen items-center justify-center p-2 sm:p-4",children:[pe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),pe.jsxs("div",{className:`relative w-full ${{sm:"max-w-sm sm:max-w-md",md:"max-w-sm sm:max-w-lg",lg:"max-w-sm sm:max-w-2xl",xl:"max-w-sm sm:max-w-4xl",full:"max-w-sm sm:max-w-6xl"}[i]} bg-white rounded-lg shadow-xl max-h-[95vh] overflow-hidden`,children:[pe.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200",children:[pe.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate pr-2",children:t}),pe.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0",children:pe.jsx(m,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),pe.jsx("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[calc(95vh-80px)]",children:a})]})]})})},Te=({children:e})=>{const[s,l]=t.useState(!1),[d,n]=t.useState(!1),[o,c]=t.useState(null),N=a(),w=i();t.useEffect(()=>{(async()=>{const{data:{session:e}}=await ve.auth.getSession();c(e?.user??null)})();const{data:{subscription:e}}=ve.auth.onAuthStateChange((e,s)=>{c(s?.user??null),"SIGNED_OUT"===e&&w("/",{replace:!0})});return()=>e.unsubscribe()},[w]);const _=async()=>{try{const{error:e}=await ve.auth.signOut();if(e)return void fe("Error signing out. Please try again.");localStorage.removeItem("cartItems")}catch(e){fe("Error signing out. Please try again.")}},[k,C]=t.useState({name:o?.user_metadata?.name||"FurniStyle Admin",email:o?.email||"admin@furnistyle.com",currentPassword:"",newPassword:"",confirmPassword:"",newsletter:!0,notifications:{email:!0,sms:!1,push:!0}}),S=e=>{const{name:s,value:t,type:a,checked:i}=e.target;if(s.includes(".")){const[e,r]=s.split(".");C(s=>({...s,[e]:{...s[e],[r]:"checkbox"===a?i:t}}))}else C(e=>({...e,[s]:"checkbox"===a?i:t}))},P=[{name:"Dashboard",href:"/dashboard",icon:x},{name:"Products",href:"/dashboard/products",icon:g},{name:"Orders",href:"/dashboard/orders",icon:u},{name:"Users",href:"/dashboard/users",icon:h},{name:"Settings",href:"/dashboard/settings",icon:p}];return pe.jsxs("div",{className:"min-h-screen bg-gray-50",children:[pe.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden "+(s?"block":"hidden"),children:[pe.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>l(!1)}),pe.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white shadow-xl",children:[pe.jsxs("div",{className:"flex h-16 items-center justify-between px-4 border-b border-gray-200",children:[pe.jsxs("div",{className:"flex items-center gap-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:pe.jsx("span",{className:"text-white font-bold text-sm",children:"F"})}),pe.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"FurniStyle Admin"})]}),pe.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:pe.jsx(m,{className:"h-6 w-6"})})]}),pe.jsx("nav",{className:"flex-1 px-4 py-4 space-y-2",children:P.map(e=>pe.jsxs(r,{to:e.href,onClick:()=>l(!1),className:"flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors "+(N.pathname===e.href?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[pe.jsx(e.icon,{className:"h-5 w-5"}),e.name]},e.name))}),pe.jsx("div",{className:"px-4 py-4 border-t border-gray-200",children:pe.jsxs("button",{onClick:()=>{_(),l(!1)},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[pe.jsx(b,{className:"h-4 w-4"}),"Sign out"]})})]})]}),pe.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:pe.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[pe.jsx("div",{className:"flex h-16 items-center px-4 border-b border-gray-200",children:pe.jsxs("div",{className:"flex items-center gap-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:pe.jsx("span",{className:"text-white font-bold text-sm",children:"F"})}),pe.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"FurniStyle Admin"})]})}),pe.jsx("nav",{className:"flex-1 px-4 py-4 space-y-2",children:P.map(e=>pe.jsxs(r,{to:e.href,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors "+(N.pathname===e.href?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[pe.jsx(e.icon,{className:"h-5 w-5"}),e.name]},e.name))}),pe.jsxs("div",{className:"p-4 border-t border-gray-200",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[pe.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:pe.jsx(f,{className:"h-4 w-4 text-gray-600"})}),pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-900",children:o?.user_metadata?.name||"Admin"}),pe.jsx("p",{className:"text-xs text-gray-500",children:"Administrator"})]})]}),pe.jsxs("button",{onClick:_,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[pe.jsx(b,{className:"h-4 w-4"}),"Sign out"]})]})]})}),pe.jsxs("div",{className:"lg:pl-64",children:[pe.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[pe.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>l(!0),children:pe.jsx(y,{className:"h-6 w-6"})}),pe.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[pe.jsx("div",{className:"flex flex-1"}),pe.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[pe.jsxs(r,{to:"/dashboard/products/add-product",className:"hidden sm:flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[pe.jsx(j,{className:"h-4 w-4"}),"Add Product"]}),pe.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),pe.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-x-2 hover:bg-gray-50 rounded-lg p-2 transition-colors",children:[pe.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:pe.jsx(f,{className:"h-4 w-4 text-gray-600"})}),pe.jsx("span",{className:"hidden lg:block text-sm font-medium text-gray-900",children:o?.user_metadata?.name||"Admin"})]})]})]})]}),pe.jsx("main",{className:"py-6",children:pe.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e})})]}),pe.jsx(Me,{isOpen:d,onClose:()=>n(!1),title:"Admin Profile",size:"lg",children:pe.jsxs("div",{className:"space-y-6",children:[pe.jsxs("form",{onSubmit:e=>{e.preventDefault(),be("Profile updated successfully!")},className:"space-y-4",children:[pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),pe.jsx("input",{type:"text",name:"name",value:k.name,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),pe.jsx("input",{type:"email",name:"email",value:k.email,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),pe.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Update Profile"})]}),pe.jsxs("form",{onSubmit:e=>{e.preventDefault(),k.newPassword===k.confirmPassword?k.newPassword.length<6?fe("Password must be at least 6 characters"):(be("Password changed successfully!"),C(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""}))):fe("Passwords don't match")},className:"space-y-4",children:[pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Change Password"}),pe.jsxs("div",{className:"space-y-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),pe.jsx("input",{type:"password",name:"currentPassword",value:k.currentPassword,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),pe.jsx("input",{type:"password",name:"newPassword",value:k.newPassword,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),pe.jsx("input",{type:"password",name:"confirmPassword",value:k.confirmPassword,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),pe.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Change Password"})]}),pe.jsxs("div",{className:"space-y-4",children:[pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Preferences"}),pe.jsxs("div",{className:"space-y-4",children:[pe.jsxs("label",{className:"flex items-center gap-3",children:[pe.jsx("input",{type:"checkbox",name:"newsletter",checked:k.newsletter,onChange:S,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),pe.jsx("span",{className:"text-sm text-gray-700",children:"Subscribe to newsletter"})]}),pe.jsxs("div",{className:"space-y-3",children:[pe.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Notification Preferences"}),pe.jsxs("label",{className:"flex items-center gap-3",children:[pe.jsx("input",{type:"checkbox",name:"notifications.email",checked:k.notifications.email,onChange:S,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),pe.jsx("span",{className:"text-sm text-gray-700",children:"Email notifications"})]}),pe.jsxs("label",{className:"flex items-center gap-3",children:[pe.jsx("input",{type:"checkbox",name:"notifications.sms",checked:k.notifications.sms,onChange:S,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),pe.jsx("span",{className:"text-sm text-gray-700",children:"SMS notifications"})]}),pe.jsxs("label",{className:"flex items-center gap-3",children:[pe.jsx("input",{type:"checkbox",name:"notifications.push",checked:k.notifications.push,onChange:S,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),pe.jsx("span",{className:"text-sm text-gray-700",children:"Push notifications"})]})]})]})]})]})}),pe.jsx(v,{position:"top-right",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",fontWeight:"500",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",maxWidth:"400px"},success:{duration:4e3,style:{background:"#10b981",color:"#fff"},iconTheme:{primary:"#fff",secondary:"#10b981"}},error:{duration:5e3,style:{background:"#ef4444",color:"#fff"},iconTheme:{primary:"#fff",secondary:"#ef4444"}},loading:{style:{background:"#6b7280",color:"#fff"}}}})]})},We=t.lazy(()=>s(()=>Promise.resolve().then(()=>Ye),void 0)),qe=t.lazy(()=>s(()=>Promise.resolve().then(()=>Ze),void 0)),Ue=t.lazy(()=>s(()=>Promise.resolve().then(()=>es),void 0)),Fe=t.lazy(()=>s(()=>Promise.resolve().then(()=>ss),void 0)),Le=t.lazy(()=>s(()=>Promise.resolve().then(()=>is),void 0)),Ge=t.lazy(()=>s(()=>Promise.resolve().then(()=>ns),void 0)),Ve=t.lazy(()=>s(()=>Promise.resolve().then(()=>xs),void 0)),Be=()=>pe.jsx("div",{className:"flex items-center justify-center h-64",children:pe.jsxs("div",{className:"text-center",children:[pe.jsx("div",{className:"w-6 h-6 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),pe.jsx("p",{className:"text-gray-600 text-sm",children:"Loading..."})]})}),Je=Object.freeze(Object.defineProperty({__proto__:null,default:()=>pe.jsx(Te,{children:pe.jsx(t.Suspense,{fallback:pe.jsx(Be,{}),children:pe.jsxs(l,{children:[pe.jsx(d,{index:!0,element:pe.jsx(We,{})}),pe.jsx(d,{path:"products",element:pe.jsx(Ue,{})}),pe.jsx(d,{path:"products/add-product",element:pe.jsx(Ge,{})}),pe.jsx(d,{path:"products/:id/edit",element:pe.jsx(Ve,{})}),pe.jsx(d,{path:"orders",element:pe.jsx(qe,{})}),pe.jsx(d,{path:"users",element:pe.jsx(Le,{})}),pe.jsx(d,{path:"settings",element:pe.jsx(Fe,{})}),pe.jsx(d,{path:"*",element:pe.jsx(n,{to:"/dashboard",replace:!0})})]})})})},Symbol.toStringTag,{value:"Module"})),Ke=()=>{const[e,s]=t.useState([]),[a,i]=t.useState(!0),[r,l]=t.useState(null),[d,n]=t.useState(null),o=t.useCallback(async(e=!1)=>{try{if(i(!0),l(null),!e){const e=ke("orders");if(e)return s(e.data),n(e.timestamp),i(!1),void(e.isStale&&o(!0))}const{data:t,error:a}=await ve.from("orders").select("*").order("created_at",{ascending:!1});if(a)throw a;Ce("orders",t||[]),s(t||[]),n(Date.now())}catch(t){l(t.message);const e=ke("orders");e&&(s(e.data),n(e.timestamp))}finally{i(!1)}},[]);t.useEffect(()=>{o()},[o]);const c=t.useMemo(()=>{if(!e.length)return{totalOrders:0,totalRevenue:0,pendingOrders:0,completedOrders:0,averageOrderValue:0,monthlyRevenue:0,monthlyOrders:0,revenueGrowth:0,ordersGrowth:0};const s=e.length,t=e.reduce((e,s)=>e+(s.total_amount||0),0),a=e.filter(e=>"pending"===e.status).length,i=e.filter(e=>"closed"===e.status).length,r=s>0?t/s:0,l=new Date,d=l.getMonth(),n=l.getFullYear(),o=0===d?11:d-1,c=0===d?n-1:n,m=e.filter(e=>{const s=new Date(e.created_at);return s.getMonth()===d&&s.getFullYear()===n}),x=e.filter(e=>{const s=new Date(e.created_at);return s.getMonth()===o&&s.getFullYear()===c}),g=m.reduce((e,s)=>e+(s.total_amount||0),0),u=m.length,h=x.reduce((e,s)=>e+(s.total_amount||0),0),p=x.length;return{totalOrders:s,totalRevenue:t,pendingOrders:a,completedOrders:i,averageOrderValue:r,monthlyRevenue:g,monthlyOrders:u,revenueGrowth:h>0?(g-h)/h*100:0,ordersGrowth:p>0?(u-p)/p*100:0}},[e]);return{orders:e,analytics:c,loading:a,error:r,refresh:o,lastUpdated:d}},Ye=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{products:e,loading:s,error:a,refresh:i,lastUpdated:r}=ze(),{analytics:l,loading:d,error:n,refresh:o}=Ke(),{chartData:c,loading:m,error:x,refresh:h}=(()=>{const[e,s]=t.useState([]),[a,i]=t.useState(!0),[r,l]=t.useState(null),[d,n]=t.useState(null),o=t.useCallback(async(e=!1)=>{try{if(i(!0),l(null),!e){const e=ke("chartData");if(e)return s(e.data),n(e.timestamp),i(!1),void(e.isStale&&o(!0))}const{data:t,error:a}=await ve.from("orders").select("*").order("created_at",{ascending:!0});if(a)throw a;Ce("chartData",t||[]),s(t||[]),n(Date.now())}catch(t){l(t.message);const e=ke("chartData");e&&(s(e.data),n(e.timestamp))}finally{i(!1)}},[]);return t.useEffect(()=>{o()},[o]),{chartData:t.useMemo(()=>{if(!e.length)return[];const s=[],t=new Date;for(let e=5;e>=0;e--){const a=new Date(t.getFullYear(),t.getMonth()-e,1).toLocaleDateString("en-US",{month:"short"});s.push({month:a,orders:0,revenue:0})}return e.forEach(e=>{const a=new Date(e.created_at),i=s.findIndex(e=>{const i=new Date(a.getFullYear(),a.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()-(5-s.indexOf(e)),1);return i.getTime()===r.getTime()});-1!==i&&(s[i].orders+=1,s[i].revenue+=e.total_amount||0)}),s},[e]),loading:a,error:r,refresh:o,lastUpdated:d}})(),{categoryData:p}=(e=>({categoryData:t.useMemo(()=>{if(!e||!e.length)return[];const s=new Map;e.forEach(e=>{const t=e.category||"Uncategorized";s.has(t)||s.set(t,0),s.set(t,s.get(t)+1)});const t=["#6366f1","#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444","#ec4899"],a=e.length;return Array.from(s.entries()).map(([e,s],i)=>({name:e,value:Math.round(s/a*100),count:s,color:t[i%t.length]}))},[e])}))(e),{activities:b,loading:f,error:y,refresh:j}=(()=>{const[e,s]=t.useState([]),[a,i]=t.useState(!0),[r,l]=t.useState(null),[d,n]=t.useState(null),o=t.useCallback(async(e=!1)=>{try{if(i(!0),l(null),!e){const e=ke("activities");if(e)return s(e.data),n(e.timestamp),i(!1),void(e.isStale&&o(!0))}const{data:t,error:a}=await ve.from("orders").select("*").order("created_at",{ascending:!1}).limit(8);if(a)throw a;const{data:r,error:d}=await ve.from("products").select("*").order("id",{ascending:!1}).limit(8);if(d)throw d;const c=(t||[]).map(e=>({id:`order-${e.id}`,type:"order",action:"New order received",item:`Order #${e.id}`,time:e.created_at,amount:e.total_amount})),m=(r||[]).map(e=>({id:`product-${e.id}`,type:"product",action:"Product added",item:e.name,time:(new Date).toISOString(),amount:e.price})),x=[...c,...m].sort((e,s)=>new Date(s.time)-new Date(e.time)).slice(0,10);Ce("activities",x),s(x),n(Date.now())}catch(t){l(t.message);const e=ke("activities");e&&(s(e.data),n(e.timestamp))}finally{i(!1)}},[]);return t.useEffect(()=>{o()},[o]),{activities:e,loading:a,error:r,refresh:o,lastUpdated:d}})(),v=s||d||m||f,O=a||n||x||y,D=()=>{i(),o(),h(),j()},A=e=>`KES ${e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,E=e=>`${e>=0?"+":""}${e.toFixed(1)}%`,z=[{title:"Total Products",count:v?"…":e.length,icon:g,bgGradient:"bg-gradient-to-br from-indigo-500 to-indigo-600",iconColor:"text-white",change:"+5.2%",changeType:"up",description:"Active products in catalog"},{title:"Total Revenue",count:v?"…":A(l.totalRevenue),icon:N,bgGradient:"bg-gradient-to-br from-green-500 to-green-600",iconColor:"text-white",change:E(l.revenueGrowth),changeType:l.revenueGrowth>=0?"up":"down",description:"Total revenue from all orders"},{title:"Total Orders",count:v?"…":l.totalOrders,icon:u,bgGradient:"bg-gradient-to-br from-purple-500 to-purple-600",iconColor:"text-white",change:E(l.ordersGrowth),changeType:l.ordersGrowth>=0?"up":"down",description:"Total orders received"},{title:"Pending Orders",count:v?"…":l.pendingOrders,icon:w,bgGradient:"bg-gradient-to-br from-orange-500 to-orange-600",iconColor:"text-white",change:`${l.completedOrders} completed`,changeType:"neutral",description:"Orders awaiting processing"}];return pe.jsxs("div",{className:"space-y-8",children:[pe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[pe.jsxs("div",{children:[pe.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),pe.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening with your store."})]}),pe.jsxs("div",{className:"flex items-center gap-4",children:[r&&pe.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",new Date(r).toLocaleTimeString()]}),pe.jsxs("button",{onClick:D,disabled:v,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Refresh dashboard data",children:[pe.jsx(_,{className:"h-4 w-4 "+(v?"animate-spin":"")}),"Refresh"]})]})]}),O&&pe.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded-lg",children:[pe.jsxs("p",{children:["Error loading data: ",O]}),pe.jsx("button",{onClick:D,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}),pe.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:z.map(({title:e,count:s,icon:t,bgGradient:a,iconColor:i,change:r,changeType:l,description:d})=>pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s}),pe.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d})]}),pe.jsx("div",{className:`${a} p-3 rounded-lg`,children:pe.jsx(t,{className:`w-6 h-6 ${i}`})})]}),pe.jsxs("div",{className:"flex items-center mt-4",children:["up"===l&&pe.jsx(k,{className:"w-4 h-4 text-green-500 mr-1"}),"down"===l&&pe.jsx(C,{className:"w-4 h-4 text-red-500 mr-1"}),pe.jsxs("span",{className:"text-sm font-medium "+("up"===l?"text-green-600":"down"===l?"text-red-600":"text-gray-500"),children:[r," from last month"]})]})]},e))}),pe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[pe.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Orders & Revenue"}),pe.jsx(S,{className:"w-5 h-5 text-green-500"})]}),pe.jsx("div",{style:{width:"100%",height:300},children:pe.jsx(te,{children:pe.jsxs(ae,{data:c,margin:{top:10,right:30,left:0,bottom:0},children:[pe.jsx(ie,{strokeDasharray:"3 3",stroke:"#f3f4f6"}),pe.jsx(re,{dataKey:"month",stroke:"#6b7280",tick:{fontSize:12}}),pe.jsx(le,{stroke:"#6b7280",tick:{fontSize:12}}),pe.jsx(de,{contentStyle:{backgroundColor:"#ffffff",borderRadius:8,border:"1px solid #e5e7eb",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelStyle:{fontWeight:"600",color:"#374151"},formatter:(e,s)=>["revenue"===s?A(e):e,"revenue"===s?"Revenue":"Orders"]}),pe.jsx(ne,{type:"monotone",dataKey:"orders",stroke:"#6366f1",strokeWidth:2,dot:{r:4,strokeWidth:2,stroke:"#6366f1",fill:"#ffffff"},activeDot:{r:6,stroke:"#6366f1",strokeWidth:2}})]})})})]}),pe.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Categories"}),pe.jsx(P,{className:"w-5 h-5 text-blue-500"})]}),pe.jsx("div",{style:{width:"100%",height:300},children:pe.jsx(te,{children:pe.jsxs(oe,{children:[pe.jsx(ce,{data:p,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:p.map((e,s)=>pe.jsx(me,{fill:e.color},`cell-${s}`))}),pe.jsx(de,{contentStyle:{backgroundColor:"#ffffff",borderRadius:8,border:"1px solid #e5e7eb",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}})]})})}),pe.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:p.map((e,s)=>pe.jsxs("div",{className:"flex items-center gap-2",children:[pe.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),pe.jsx("span",{className:"text-sm text-gray-600",children:e.name}),pe.jsxs("span",{className:"text-sm font-medium text-gray-900 ml-auto",children:[e.value,"%"]})]},s))})]})]}),pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[pe.jsx("div",{className:"p-6 border-b border-gray-200",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),pe.jsx(w,{className:"w-5 h-5 text-indigo-500"})]})}),pe.jsx("div",{className:"p-6",children:f?pe.jsxs("div",{className:"flex items-center justify-center py-8",children:[pe.jsx(_,{className:"w-6 h-6 animate-spin text-indigo-600"}),pe.jsx("span",{className:"ml-2 text-gray-600",children:"Loading activities..."})]}):0===b.length?pe.jsxs("div",{className:"text-center py-8 text-gray-500",children:[pe.jsx(w,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),pe.jsx("p",{children:"No recent activity"}),pe.jsx("p",{className:"text-sm",children:"Activity will appear here as orders and products are added"})]}):pe.jsx("div",{className:"space-y-4",children:b.map(e=>{const s=new Date(e.time).toLocaleString();return pe.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[pe.jsx("div",{className:"w-2 h-2 rounded-full "+("product"===e.type?"bg-blue-500":"order"===e.type?"bg-green-500":"bg-purple-500")}),pe.jsxs("div",{className:"flex-1",children:[pe.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.action}),pe.jsx("p",{className:"text-sm text-gray-600",children:e.item}),e.amount&&pe.jsx("p",{className:"text-xs text-indigo-600 font-medium",children:A(e.amount)})]}),pe.jsx("span",{className:"text-xs text-gray-500",children:s})]},e.id)})})})]})]})}},Symbol.toStringTag,{value:"Module"})),Xe=e=>`KES ${e.toLocaleString(void 0,{minimumFractionDigits:2})}`,He=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),Ze=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{orders:e,loading:s,error:a,refresh:i,lastUpdated:r}=Ke(),{invalidateAll:l}=Ie(),[d,n]=t.useState(null),[o,c]=t.useState([]),[m,x]=t.useState(!1),[h,p]=t.useState(null),[b,f]=t.useState(!1),y=t.useMemo(()=>({total:e.length,pending:e.filter(e=>"pending"===e.status).length,closed:e.filter(e=>"closed"===e.status).length,suspended:e.filter(e=>"suspended"===e.status).length,volume:e.reduce((e,s)=>e+(s.total_amount||0),0)}),[e]),j=({status:e})=>{const s="px-2 py-1 rounded-md text-xs font-semibold";return"pending"===e?pe.jsx("span",{className:`${s} bg-yellow-100 text-yellow-800`,children:"Pending"}):"closed"===e?pe.jsx("span",{className:`${s} bg-green-100 text-green-800`,children:"Closed"}):"suspended"===e?pe.jsx("span",{className:`${s} bg-red-100 text-red-700`,children:"Suspended"}):pe.jsx("span",{className:`${s} bg-gray-100 text-gray-700`,children:e||"Unknown"})};t.useEffect(()=>{if(!d)return;(async()=>{x(!0),p(null);const{data:e,error:s}=await ve.from("order_items").select("*").eq("order_id",d.id);s?p(s.message):c(e),x(!1)})()},[d]);const v=async e=>{if(!d)return;f(!0);const s=je("Updating order status...");try{const{error:s}=await ve.from("orders").update({status:e}).eq("id",d.id);s?fe("Failed to update order status: "+s.message):(be(`Order status updated to ${e}`),l(),i(),n(s=>({...s,status:e})))}catch(t){fe("An unexpected error occurred while updating order status")}finally{f(!1),s&&s()}};return s?pe.jsx("div",{className:"space-y-6",children:pe.jsx("div",{className:"flex items-center justify-center py-12",children:pe.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[pe.jsx(_,{className:"w-5 h-5 animate-spin"}),pe.jsx("span",{children:"Loading orders..."})]})})}):a?pe.jsx("div",{className:"space-y-6",children:pe.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[pe.jsx(O,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),pe.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Error Loading Orders"}),pe.jsx("p",{className:"text-red-700",children:a}),pe.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):pe.jsxs("div",{className:"space-y-6",children:[pe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[pe.jsxs("div",{children:[pe.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders"}),pe.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track customer orders."})]}),pe.jsxs("div",{className:"flex items-center gap-3",children:[pe.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[pe.jsx(_,{className:"h-4 w-4"}),"Refresh"]}),r&&pe.jsxs("span",{className:"text-sm text-gray-500",children:["Last updated: ",new Date(r).toLocaleTimeString()]})]})]}),pe.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:y.total})]}),pe.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:pe.jsx(u,{className:"w-6 h-6 text-indigo-600"})})]})}),pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:y.pending})]}),pe.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:pe.jsx(D,{className:"w-6 h-6 text-yellow-600"})})]})}),pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:y.closed})]}),pe.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:pe.jsx(A,{className:"w-6 h-6 text-green-600"})})]})}),pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:Xe(y.volume)})]}),pe.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:pe.jsx(N,{className:"w-6 h-6 text-green-600"})})]})})]}),0===e.length?pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[pe.jsx(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Orders Yet"}),pe.jsx("p",{className:"text-gray-600",children:"Orders will appear here once customers start placing them."})]}):pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[pe.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:pe.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),pe.jsx("div",{className:"overflow-x-auto",children:pe.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[pe.jsx("thead",{className:"bg-gray-50",children:pe.jsxs("tr",{children:[pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),pe.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>pe.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:pe.jsxs("div",{className:"flex items-center",children:[pe.jsx("div",{className:"flex-shrink-0 h-2 w-2 rounded-full bg-indigo-400 mr-3"}),pe.jsxs("span",{className:"text-sm font-medium text-gray-900 font-mono",children:["#",e.id]})]})}),pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:He(e.created_at)}),pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:pe.jsx(j,{status:e.status})}),pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:Xe(e.total_amount)}),pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:pe.jsxs("button",{onClick:()=>n(e),className:"text-indigo-600 hover:text-indigo-900 flex items-center gap-1",children:[pe.jsx(E,{className:"w-4 h-4"}),"View"]})})]},e.id))})]})})]}),pe.jsx(Me,{isOpen:!!d,onClose:()=>n(null),title:`Order #${d?.id}`,size:"lg",children:d&&pe.jsxs("div",{className:"space-y-6",children:[pe.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:pe.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[pe.jsxs("div",{children:[pe.jsx("span",{className:"font-medium text-gray-700",children:"Date:"}),pe.jsx("span",{className:"ml-2 text-gray-900",children:He(d.created_at)})]}),pe.jsxs("div",{children:[pe.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),pe.jsx("span",{className:"ml-2",children:pe.jsx(j,{status:d.status})})]}),pe.jsxs("div",{children:[pe.jsx("span",{className:"font-medium text-gray-700",children:"Total Amount:"}),pe.jsx("span",{className:"ml-2 text-gray-900 font-semibold",children:Xe(d.total_amount)})]})]})}),pe.jsxs("div",{children:[pe.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Order Items"}),m?pe.jsx("div",{className:"flex items-center justify-center py-8",children:pe.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[pe.jsx(_,{className:"w-4 h-4 animate-spin"}),pe.jsx("span",{children:"Loading items..."})]})}):h?pe.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:pe.jsxs("p",{className:"text-red-600",children:["Error loading items: ",h]})}):0===o.length?pe.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[pe.jsx(g,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),pe.jsx("p",{className:"text-gray-600",children:"No items found for this order."})]}):pe.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200",children:pe.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[pe.jsx("thead",{className:"bg-gray-50",children:pe.jsxs("tr",{children:[pe.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),pe.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),pe.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),pe.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),pe.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(({id:e,product_name:s,quantity:t,price:a})=>pe.jsxs("tr",{className:"hover:bg-gray-50",children:[pe.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s}),pe.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t}),pe.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Xe(a)}),pe.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:Xe(a*t)})]},e))})]})})]}),pe.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[(()=>{const e="closed"===d.status,s=b||e,t=b||e;return pe.jsxs(pe.Fragment,{children:[pe.jsx("button",{onClick:()=>v("closed"),disabled:s,className:"px-4 py-2 rounded-md font-medium transition-colors "+(s?"bg-green-400 cursor-not-allowed text-white opacity-60":"bg-green-600 hover:bg-green-700 text-white"),children:b?"Updating...":"Finalize Order"}),pe.jsx("button",{onClick:()=>v("suspended"),disabled:t,className:"px-4 py-2 rounded-md font-medium transition-colors "+(t?"bg-yellow-400 cursor-not-allowed text-white opacity-60":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:b?"Updating...":"Suspend Order"})]})})(),pe.jsx("button",{onClick:()=>n(null),className:"ml-auto px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md font-medium transition-colors",children:"Close"})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Qe=({isOpen:e,onClose:s,product:a,onEdit:i,onDelete:r})=>{const[l,d]=t.useState([]),[n,o]=t.useState([]),[c,x]=t.useState(!1),{invalidateProducts:u}=Ie();t.useEffect(()=>{e&&a&&h()},[e,a]);const h=async()=>{if(a?.id){x(!0);try{const{data:e,error:s}=await ve.from("product_specifications").select("*").eq("product_id",a.id).order("display_order");if(s)throw s;d(e||[]);const{data:t,error:i}=await ve.from("product_delivery_options").select("*").eq("product_id",a.id).order("delivery_cost");if(i)throw i;o(t||[])}catch(e){}finally{x(!1)}}};if(!e||!a)return null;return pe.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:pe.jsxs("div",{className:"flex min-h-screen items-center justify-center p-2 sm:p-4",children:[pe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),pe.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl max-h-[95vh] overflow-hidden",children:[pe.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200",children:[pe.jsxs("div",{className:"flex-1 min-w-0",children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:a.name}),pe.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.category})]}),pe.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[pe.jsx("button",{onClick:()=>{const e=`${window.location.origin}/product/${a.slug||a.id}`,s=`Hi, check out this item: ${a.name}. ${e}`,t=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(t,"_blank")},className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"Share on WhatsApp",children:pe.jsx(z,{className:"h-5 w-5"})}),pe.jsx("button",{onClick:()=>i?.(a),className:"p-2 text-gray-400 hover:text-indigo-600 transition-colors",title:"Edit product",children:pe.jsx(R,{className:"h-5 w-5"})}),pe.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this product?"))try{const{error:e}=await ve.from("products").delete().eq("id",a.id);if(e)throw e;u(),r?.(a.id),s(),be("Product deleted successfully!")}catch(e){fe("Failed to delete product.")}},className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete product",children:pe.jsx($,{className:"h-5 w-5"})}),pe.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:pe.jsx(m,{className:"h-5 w-5"})})]})]}),pe.jsxs("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[calc(95vh-80px)]",children:[pe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[pe.jsxs("div",{className:"space-y-4",children:[pe.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[pe.jsx(g,{className:"h-5 w-5 text-indigo-600"}),"Product Images"]}),pe.jsx("div",{className:"grid grid-cols-2 gap-4",children:(a.images||[]).map((e,s)=>pe.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border border-gray-200",children:pe.jsx("img",{src:e,alt:`${a.name} - Image ${s+1}`,className:"w-full h-full object-cover"})},s))}),(!a.images||0===a.images.length)&&pe.jsx("div",{className:"aspect-square rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:pe.jsxs("div",{className:"text-center",children:[pe.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),pe.jsx("p",{className:"text-gray-500",children:"No images available"})]})})]}),pe.jsxs("div",{className:"space-y-6",children:[pe.jsxs("div",{children:[pe.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Product Information"}),pe.jsxs("div",{className:"space-y-3",children:[pe.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[pe.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Price"}),pe.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:["KES ",a.price?.toLocaleString?.()??a.price]})]}),pe.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[pe.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Category"}),pe.jsxs("span",{className:"text-sm text-gray-900 flex items-center gap-1",children:[pe.jsx(I,{className:"h-4 w-4"}),a.category]})]}),pe.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[pe.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Product ID"}),pe.jsxs("span",{className:"text-sm text-gray-900 font-mono",children:["#",a.id]})]}),a.created_at&&pe.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[pe.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Created"}),pe.jsxs("span",{className:"text-sm text-gray-900 flex items-center gap-1",children:[pe.jsx(M,{className:"h-4 w-4"}),new Date(a.created_at).toLocaleDateString()]})]})]})]}),pe.jsxs("div",{children:[pe.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Description"}),pe.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.description||"No description available."})]})]})]}),l.length>0&&pe.jsxs("div",{className:"mt-8",children:[pe.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[pe.jsx(T,{className:"h-5 w-5 text-indigo-600"}),"Specifications"]}),pe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map((e,s)=>{const t=(e=>{switch(e){case"dimension":return T;case"weight":return U;case"material":return q;default:return g}})(e.specification_type);return pe.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[pe.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[pe.jsx(t,{className:"h-4 w-4 text-indigo-600"}),pe.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.specification_name})]}),pe.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.specification_value,e.unit&&pe.jsx("span",{className:"text-sm font-normal text-gray-600 ml-1",children:e.unit})]})]},s)})})]}),n.length>0&&pe.jsxs("div",{className:"mt-8",children:[pe.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[pe.jsx(W,{className:"h-5 w-5 text-indigo-600"}),"Delivery Options"]}),pe.jsx("div",{className:"space-y-3",children:n.map((e,s)=>pe.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("h5",{className:"font-medium text-gray-900",children:e.delivery_name}),pe.jsx("p",{className:"text-sm text-gray-600",children:e.delivery_time})]}),pe.jsxs("div",{className:"text-right",children:[pe.jsx("p",{className:"font-semibold text-gray-900",children:e.delivery_cost>0?`KES ${e.delivery_cost}`:"Free"}),pe.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(e.is_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_available?"Available":"Unavailable"})]})]})},s))})]}),c&&pe.jsx("div",{className:"mt-8 text-center",children:pe.jsxs("div",{className:"inline-flex items-center gap-2 text-gray-500",children:[pe.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),"Loading product details..."]})}),!c&&0===l.length&&0===n.length&&pe.jsxs("div",{className:"mt-8 text-center py-8",children:[pe.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),pe.jsx("p",{className:"text-gray-500",children:"No additional details available for this product."})]})]})]})]})})},es=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{products:e,loading:s,error:a,refresh:l,lastUpdated:d}=ze(),{invalidateProducts:n}=Ie(),o=i(),[c,m]=t.useState(null),[x,g]=t.useState(!1),u=t.useMemo(()=>(e||[]).slice().sort((e,s)=>(s.id??0)-(e.id??0)),[e]),h=e=>{const s=`${window.location.origin}/product/${e.slug||e.id}`,t=`Hi, check out this item: ${e.name}. ${s}`,a=`https://wa.me/?text=${encodeURIComponent(t)}`;window.open(a,"_blank")},p=async e=>{if(!window.confirm("Are you sure you want to delete this product?"))return;const s=je("Deleting product...");try{const{error:s}=await ve.from("products").delete().eq("id",e);s?fe("Failed to delete product: "+s.message):(be("Product deleted successfully"),n())}catch(t){fe("An unexpected error occurred while deleting the product")}finally{s&&s()}},b=()=>{l()},f=e=>{m(e),g(!0)},y=()=>{g(!1),m(null)},v=u.length,N=t.useMemo(()=>{const e=new Map;for(const s of u){const t=s.category||"Uncategorized";e.has(t)||e.set(t,[]),e.get(t).push(s)}return e},[u]),w=u.slice(0,5);return pe.jsxs("div",{className:"space-y-6",children:[pe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[pe.jsxs("div",{children:[pe.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Products"}),pe.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your product catalog and inventory."})]}),pe.jsxs("div",{className:"flex items-center gap-3",children:[d&&pe.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",new Date(d).toLocaleTimeString()]}),pe.jsxs("button",{onClick:b,disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Refresh products data",children:[pe.jsx(_,{className:"h-4 w-4 "+(s?"animate-spin":"")}),"Refresh"]}),pe.jsxs(r,{to:"/dashboard/products/add-product",className:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-4 py-2 rounded-lg transition-colors",children:[pe.jsx(j,{size:18}),"Add Product"]})]})]}),pe.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:v})]}),pe.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:pe.jsx(F,{className:"w-6 h-6 text-indigo-600"})})]})}),pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Categories"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.size})]}),pe.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:pe.jsx(I,{className:"w-6 h-6 text-green-600"})})]})}),pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recent Uploads"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:w.length})]}),pe.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:pe.jsx(_,{className:"w-6 h-6 text-purple-600"})})]})})]}),pe.jsxs("div",{children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Uploads"}),s?pe.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[...Array(5)].map((e,s)=>pe.jsxs("div",{className:"bg-white rounded-lg shadow p-3 animate-pulse",children:[pe.jsx("div",{className:"h-28 bg-indigo-200 rounded"}),pe.jsx("div",{className:"mt-3 h-4 bg-indigo-200 rounded w-3/4"})]},s))}):a?pe.jsxs("div",{className:"text-center text-red-600",children:[pe.jsxs("p",{children:["Error loading products: ",a]}),pe.jsx("button",{onClick:b,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}):0===w.length?pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[pe.jsx(F,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),pe.jsx("p",{className:"text-gray-600",children:"No products uploaded yet."})]}):pe.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:w.map(e=>pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[pe.jsx("img",{src:e.image_url||e.images&&e.images[0],alt:e.name,className:"w-full h-28 object-cover"}),pe.jsxs("div",{className:"p-4",children:[pe.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.name}),pe.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["KES ",e.price?.toLocaleString?.()??e.price]}),pe.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs",children:[pe.jsxs("button",{onClick:()=>f(e),className:"inline-flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"View product details",children:[pe.jsx(E,{size:14}),"View"]}),pe.jsx("button",{type:"button",onClick:()=>h(e),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700",title:"Share on WhatsApp",children:"Share"}),pe.jsx(r,{to:`/dashboard/products/${e.id}/edit`,className:"inline-flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"Edit product",children:"Edit"}),pe.jsx("button",{type:"button",onClick:()=>p(e.id),className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700",title:"Delete product",children:pe.jsx($,{size:14})})]})]})]},e.id))})]}),pe.jsx("div",{className:"space-y-8",children:[...N.entries()].map(([e,s])=>pe.jsxs("div",{children:[pe.jsxs("div",{className:"flex items-baseline justify-between mb-6",children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),pe.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[s.length," items"]})]}),pe.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map(e=>pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[pe.jsx("img",{src:e.image_url||e.images&&e.images[0],alt:e.name,className:"w-full h-40 object-cover"}),pe.jsxs("div",{className:"p-4",children:[pe.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.name}),pe.jsxs("p",{className:"text-indigo-600 font-semibold mt-1",children:["KES ",e.price?.toLocaleString?.()??e.price]}),pe.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs",children:[pe.jsxs("button",{onClick:()=>f(e),className:"inline-flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"View product details",children:[pe.jsx(E,{size:14}),"View"]}),pe.jsx("button",{type:"button",onClick:()=>h(e),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700",title:"Share on WhatsApp",children:"Share"}),pe.jsx(r,{to:`/dashboard/products/${e.id}/edit`,className:"inline-flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"Edit product",children:"Edit"}),pe.jsx("button",{type:"button",onClick:()=>p(e.id),className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700",title:"Delete product",children:pe.jsx($,{size:14})})]})]})]},e.id))})]},e))}),pe.jsx(Qe,{isOpen:x,onClose:y,product:c,onEdit:e=>{y(),o(`/dashboard/products/${e.id}/edit`)},onDelete:e=>{y()}})]})}},Symbol.toStringTag,{value:"Module"})),ss=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,s]=t.useState({name:"John Doe",email:"admin@example.com",phone:"+254712345678"}),[a,i]=t.useState({darkMode:!1,notifications:!0}),[r,l]=t.useState({current:"",new:"",confirm:""});return pe.jsxs("div",{className:"space-y-6",children:[pe.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:pe.jsxs("div",{children:[pe.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),pe.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your profile, preferences, and security settings."})]})}),pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6",children:[pe.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[pe.jsx(L,{size:20})," Profile Information"]}),[{label:"Full Name",type:"text",key:"name",icon:L},{label:"Email Address",type:"email",key:"email",icon:G},{label:"Phone Number",type:"tel",key:"phone",icon:V}].map(({label:t,type:a,key:i,icon:r})=>pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),pe.jsxs("div",{className:"relative",children:[pe.jsx(r,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),pe.jsx("input",{type:a,value:e[i],onChange:t=>s({...e,[i]:t.target.value}),className:"w-full pl-10 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]},i))]}),pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6",children:[pe.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[pe.jsx(B,{size:20})," Preferences"]}),pe.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[pe.jsxs("div",{className:"flex items-center gap-4",children:[pe.jsx("input",{id:"darkMode",type:"checkbox",checked:a.darkMode,onChange:()=>i(e=>({...e,darkMode:!e.darkMode})),className:"w-5 h-5 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"}),pe.jsxs("label",{htmlFor:"darkMode",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[pe.jsx(J,{size:16})," Enable Dark Mode"]})]}),pe.jsxs("div",{className:"flex items-center gap-4",children:[pe.jsx("input",{id:"notifications",type:"checkbox",checked:a.notifications,onChange:()=>i(e=>({...e,notifications:!e.notifications})),className:"w-4 h-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"}),pe.jsxs("label",{htmlFor:"notifications",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[pe.jsx(K,{size:16})," Enable Notifications"]})]})]})]}),pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6",children:[pe.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[pe.jsx(Y,{size:20})," Change Password"]}),[{label:"Current Password",key:"current"},{label:"New Password",key:"new"},{label:"Confirm New Password",key:"confirm"}].map(({label:e,key:s})=>pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),pe.jsx("input",{type:"password",value:r[s],onChange:e=>l({...r,[s]:e.target.value}),className:"w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]},s))]}),pe.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4",children:[pe.jsxs("button",{onClick:()=>{s({name:"John Doe",email:"admin@example.com",phone:"+254712345678"}),i({darkMode:!1,notifications:!0}),l({current:"",new:"",confirm:""})},className:"inline-flex items-center justify-center gap-2 bg-white border border-gray-300 text-gray-700 font-medium px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",children:[pe.jsx(X,{size:18})," Reset"]}),pe.jsxs("button",{onClick:()=>{be("Settings saved successfully!")},className:"inline-flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-4 py-2 rounded-lg transition-colors",children:[pe.jsx(H,{size:18})," Save Settings"]})]})]})}},Symbol.toStringTag,{value:"Module"})),ts=[{id:1,name:"Alice Johnson",email:"alice@example.com",role:"Admin"},{id:2,name:"Bob Smith",email:"bob@example.com",role:"Editor"}],as=["Admin","Editor","Viewer"],is=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,s]=t.useState(ts),[a,i]=t.useState(!1),[r,l]=t.useState({name:"",email:"",role:"Viewer"});return pe.jsxs("div",{className:"space-y-6",children:[pe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[pe.jsxs("div",{children:[pe.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Users"}),pe.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user accounts and permissions."})]}),pe.jsxs("div",{className:"flex items-center gap-3",children:[pe.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[pe.jsx(_,{className:"h-4 w-4"}),"Refresh"]}),pe.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-4 py-2 rounded-lg transition-colors",children:[pe.jsx(Z,{size:18}),"Add User"]})]})]}),pe.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.length})]}),pe.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:pe.jsx(h,{className:"w-6 h-6 text-indigo-600"})})]})}),pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.filter(e=>"Admin"===e.role).length})]}),pe.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:pe.jsx(Q,{className:"w-6 h-6 text-red-600"})})]})}),pe.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Editors"}),pe.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.filter(e=>"Editor"===e.role).length})]}),pe.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:pe.jsx(ee,{className:"w-6 h-6 text-blue-600"})})]})})]}),0===e.length?pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[pe.jsx(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Users Yet"}),pe.jsx("p",{className:"text-gray-600",children:"Add users to manage your dashboard access."})]}):pe.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[pe.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:pe.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"All Users"})}),pe.jsx("div",{className:"overflow-x-auto",children:pe.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[pe.jsx("thead",{className:"bg-gray-50",children:pe.jsxs("tr",{children:[pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),pe.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),pe.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>pe.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:pe.jsxs("div",{className:"flex items-center",children:[pe.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:pe.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:pe.jsx("span",{className:"text-sm font-medium text-indigo-600",children:e.name.split(" ").map(e=>e[0]).join("")})})}),pe.jsx("div",{className:"ml-4",children:pe.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email}),pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:pe.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full "+("Admin"===e.role?"bg-red-100 text-red-800":"Editor"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:["Admin"===e.role&&pe.jsx(Q,{size:12}),"Editor"===e.role&&pe.jsx(ee,{size:12}),"Viewer"===e.role&&pe.jsx(se,{size:12}),e.role]})}),pe.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:pe.jsxs("div",{className:"flex items-center gap-2",children:[pe.jsxs("button",{className:"text-indigo-600 hover:text-indigo-900 flex items-center gap-1",children:[pe.jsx(E,{className:"w-4 h-4"}),"View"]}),pe.jsxs("button",{className:"text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[pe.jsx(R,{className:"w-4 h-4"}),"Edit"]}),pe.jsx("button",{className:"text-red-600 hover:text-red-900 flex items-center gap-1",children:pe.jsx($,{className:"w-4 h-4"})})]})})]},e.id))})]})})]}),pe.jsx(Me,{isOpen:a,onClose:()=>i(!1),title:"Add New User",size:"md",children:pe.jsxs("form",{onSubmit:e=>{e.preventDefault(),r.name&&r.email&&r.role?(s(e=>[...e,{...r,id:e.length+1}]),l({name:"",email:"",role:"Viewer"}),i(!1)):fe("Please fill in all fields.")},className:"space-y-5",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block font-medium text-gray-700 mb-2",children:"Full Name"}),pe.jsx("input",{type:"text",value:r.name,onChange:e=>l({...r,name:e.target.value}),required:!0,className:"w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter full name"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block font-medium text-gray-700 mb-2",children:"Email Address"}),pe.jsx("input",{type:"email",value:r.email,onChange:e=>l({...r,email:e.target.value}),required:!0,className:"w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter email address"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block font-medium text-gray-700 mb-2",children:"Role"}),pe.jsx("select",{value:r.role,onChange:e=>l({...r,role:e.target.value}),className:"w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:as.map(e=>pe.jsx("option",{value:e,children:e},e))})]}),pe.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[pe.jsx("button",{type:"button",onClick:()=>i(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold px-4 py-2 rounded-md transition",children:"Cancel"}),pe.jsxs("button",{type:"submit",className:"bg-indigo-700 hover:bg-indigo-800 text-white font-semibold px-4 py-2 rounded-md flex items-center gap-2 transition",children:[pe.jsx(H,{size:16})," Save User"]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),rs=["Living Room","Bedroom","Office","Outdoor","Kitchen","Bathroom","Other"],ls=[{value:"dimension",label:"Dimension",icon:T},{value:"weight",label:"Weight",icon:U},{value:"material",label:"Material",icon:q},{value:"other",label:"Other",icon:g}],ds=[{value:"standard",label:"Standard Delivery"},{value:"express",label:"Express Delivery"},{value:"same_day",label:"Same Day Delivery"},{value:"pickup",label:"Store Pickup"}],ns=Object.freeze(Object.defineProperty({__proto__:null,default:({onCancel:e})=>{const s=i(),[a,r]=t.useState(!1),[l,d]=t.useState(null),{invalidateProducts:n,invalidateCategories:o}=Ie(),[c,x]=t.useState({name:"",category:rs[0],description:"",price:"",images:[],specifications:[],deliveryOptions:[],dimensions:{length:"",width:"",height:"",unit:"cm"},weight:{value:"",unit:"kg"},material:"",color:"",assembly:"required",warranty:{period:"",type:"manufacturer"}}),u=(e,s,t)=>{x(a=>({...a,specifications:a.specifications.map((a,i)=>i===e?{...a,[s]:t}:a)}))},h=(e,s,t)=>{x(a=>({...a,deliveryOptions:a.deliveryOptions.map((a,i)=>i===e?{...a,[s]:t}:a)}))},p=(e,s)=>{x(t=>({...t,dimensions:{...t.dimensions,[e]:s}}))},b=(e,s)=>{x(t=>({...t,weight:{...t.weight,[e]:s}}))},f=(e,s)=>{x(t=>({...t,warranty:{...t.warranty,[e]:s}}))};return pe.jsxs("div",{className:"space-y-6",children:[pe.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:pe.jsxs("div",{className:"flex justify-between items-center",children:[pe.jsxs("div",{children:[pe.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Add New Product"}),pe.jsx("p",{className:"text-gray-600 mt-1",children:"Create a new product with detailed specifications"})]}),e&&pe.jsx("button",{onClick:e,disabled:a,className:"text-gray-400 hover:text-red-500 transition-colors p-2 hover:bg-red-50 rounded-full","aria-label":"Go back",children:pe.jsx(m,{size:24})})]})}),l&&pe.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl flex items-center gap-2",children:[pe.jsx(m,{size:20}),l]}),pe.jsxs("form",{onSubmit:t=>{t.preventDefault(),(async()=>{if(d(null),c.name.trim()&&c.category.trim()&&c.description.trim()&&!(c.price<=0))if(0!==c.images.length){r(!0);try{const{data:t,error:a}=await ve.from("products").insert([{name:c.name,category:c.category,description:c.description,price:c.price}]).select().single();if(a)throw a;const i=t.id,r=`${c.name.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")}-${String(i).slice(0,8)}`,l=[];for(const e of c.images){const s=e.name.split(".").pop(),t=`${i}/${Date.now()}-${Math.random().toString(36).substring(2,9)}.${s}`,{error:a}=await ve.storage.from("product-images").upload(t,e);if(a)throw a;const{data:r}=ve.storage.from("product-images").getPublicUrl(t);l.push(r.publicUrl);const{error:d}=await ve.from("product_images").insert([{product_id:i,url:r.publicUrl}]);if(d)throw d}const{error:d}=await ve.from("products").update({images:l,slug:r}).eq("id",i);if(d)throw d;const m=[];(c.dimensions.length||c.dimensions.width||c.dimensions.height)&&(c.dimensions.length&&m.push({product_id:i,specification_type:"dimension",specification_name:"Length",specification_value:c.dimensions.length,unit:c.dimensions.unit,display_order:1}),c.dimensions.width&&m.push({product_id:i,specification_type:"dimension",specification_name:"Width",specification_value:c.dimensions.width,unit:c.dimensions.unit,display_order:2}),c.dimensions.height&&m.push({product_id:i,specification_type:"dimension",specification_name:"Height",specification_value:c.dimensions.height,unit:c.dimensions.unit,display_order:3})),c.weight.value&&m.push({product_id:i,specification_type:"weight",specification_name:"Weight",specification_value:c.weight.value,unit:c.weight.unit,display_order:4}),c.material&&m.push({product_id:i,specification_type:"material",specification_name:"Material",specification_value:c.material,unit:null,display_order:5}),c.color&&m.push({product_id:i,specification_type:"other",specification_name:"Color",specification_value:c.color,unit:null,display_order:6}),c.assembly&&m.push({product_id:i,specification_type:"other",specification_name:"Assembly",specification_value:"required"===c.assembly?"Assembly Required":"not_required"===c.assembly?"No Assembly Required":"Assembly Included",unit:null,display_order:7}),c.warranty.period&&m.push({product_id:i,specification_type:"other",specification_name:"Warranty",specification_value:`${c.warranty.period} (${c.warranty.type})`,unit:null,display_order:8});const x=c.specifications.filter(e=>e.name.trim()&&e.value.trim()).map((e,s)=>({product_id:i,specification_type:e.type,specification_name:e.name,specification_value:e.value,unit:e.unit||null,display_order:m.length+s+1}));if(m.push(...x),m.length>0){const{error:e}=await ve.from("product_specifications").insert(m);if(e)throw e}if(c.deliveryOptions.length>0){const e=c.deliveryOptions.filter(e=>e.name.trim()&&e.time.trim()).map(e=>({product_id:i,delivery_type:e.type,delivery_name:e.name,delivery_time:e.time,delivery_cost:parseFloat(e.cost)||0,is_available:e.available}));if(e.length>0){const{error:s}=await ve.from("product_delivery_options").insert(e);if(s)throw s}}n(),o(),be("Product added successfully!"),e?e():s("/dashboard/products")}catch(t){d("Failed to add product. Please try again.")}finally{r(!1)}}else d("Please upload at least one image.");else d("Please fill in all fields with valid values.")})()},className:"space-y-6",children:[pe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[pe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[pe.jsx(g,{className:"w-5 h-5 text-indigo-600"}),"Basic Information"]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[pe.jsxs("div",{className:"md:col-span-2",children:[pe.jsx("label",{htmlFor:"product-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),pe.jsx("input",{type:"text",id:"product-name",value:c.name,onChange:e=>x({...c,name:e.target.value}),disabled:a,required:!0,placeholder:"Enter product name",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 transition-colors"})]}),pe.jsxs("div",{children:[pe.jsx("label",{htmlFor:"product-category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),pe.jsx("select",{id:"product-category",value:c.category,onChange:e=>x({...c,category:e.target.value}),disabled:a,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 transition-colors",children:rs.map(e=>pe.jsx("option",{value:e,children:e},e))})]}),pe.jsxs("div",{children:[pe.jsx("label",{htmlFor:"product-price",className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (KES) *"}),pe.jsx("input",{type:"number",id:"product-price",min:0,value:c.price,onChange:e=>x({...c,price:Number(e.target.value)}),disabled:a,required:!0,placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 transition-colors"})]}),pe.jsxs("div",{className:"md:col-span-2",children:[pe.jsx("label",{htmlFor:"product-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),pe.jsx("textarea",{id:"product-description",value:c.description,onChange:e=>x({...c,description:e.target.value}),rows:4,disabled:a,required:!0,placeholder:"Describe your product in detail...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none disabled:opacity-50 transition-colors"})]})]})]}),pe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[pe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[pe.jsx(g,{className:"w-5 h-5 text-indigo-600"}),"Product Images"]}),pe.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-indigo-400 transition-colors",children:[pe.jsx("input",{id:"product-images",type:"file",multiple:!0,accept:"image/*",onChange:e=>{x(s=>({...s,images:[...s.images,...Array.from(e.target.files)]}))},disabled:a,className:"hidden"}),pe.jsxs("label",{htmlFor:"product-images",className:"cursor-pointer flex flex-col items-center gap-2",children:[pe.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:pe.jsx(g,{className:"w-6 h-6 text-indigo-600"})}),pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Upload product images"}),pe.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB each"})]})]})]}),c.images.length>0&&pe.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:c.images.map((e,s)=>{const t=URL.createObjectURL(e);return pe.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-gray-200 hover:border-indigo-300 transition-colors",children:[pe.jsx("img",{src:t,alt:`Selected image ${s+1}`,className:"w-full h-32 object-cover"}),pe.jsx("button",{type:"button",onClick:()=>{return e=s,void x(s=>({...s,images:s.images.filter((s,t)=>t!==e)}));var e},disabled:a,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all","aria-label":"Remove image",children:pe.jsx(m,{size:14})})]},s)})})]}),pe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[pe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[pe.jsx(T,{className:"w-5 h-5 text-indigo-600"}),"Product Specifications"]}),pe.jsxs("div",{className:"space-y-8",children:[pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(T,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dimensions"})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Length"}),pe.jsx("input",{type:"number",value:c.dimensions.length,onChange:e=>p("length",e.target.value),disabled:a,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Width"}),pe.jsx("input",{type:"number",value:c.dimensions.width,onChange:e=>p("width",e.target.value),disabled:a,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Height"}),pe.jsx("input",{type:"number",value:c.dimensions.height,onChange:e=>p("height",e.target.value),disabled:a,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),pe.jsxs("select",{value:c.dimensions.unit,onChange:e=>p("unit",e.target.value),disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[pe.jsx("option",{value:"cm",children:"Centimeters (cm)"}),pe.jsx("option",{value:"inches",children:"Inches"}),pe.jsx("option",{value:"mm",children:"Millimeters (mm)"}),pe.jsx("option",{value:"ft",children:"Feet"})]})]})]})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(U,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Weight"})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight Value"}),pe.jsx("input",{type:"number",value:c.weight.value,onChange:e=>b("value",e.target.value),disabled:a,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),pe.jsxs("select",{value:c.weight.unit,onChange:e=>b("unit",e.target.value),disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[pe.jsx("option",{value:"kg",children:"Kilograms (kg)"}),pe.jsx("option",{value:"lbs",children:"Pounds (lbs)"}),pe.jsx("option",{value:"g",children:"Grams (g)"})]})]})]})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(q,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Material & Color"})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material"}),pe.jsx("input",{type:"text",value:c.material,onChange:e=>x({...c,material:e.target.value}),disabled:a,placeholder:"e.g., Oak Wood, Metal, Fabric",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),pe.jsx("input",{type:"text",value:c.color,onChange:e=>x({...c,color:e.target.value}),disabled:a,placeholder:"e.g., Brown, Black, White",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(g,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Assembly & Warranty"})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assembly Required"}),pe.jsxs("select",{value:c.assembly,onChange:e=>x({...c,assembly:e.target.value}),disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[pe.jsx("option",{value:"required",children:"Assembly Required"}),pe.jsx("option",{value:"not_required",children:"No Assembly Required"}),pe.jsx("option",{value:"included",children:"Assembly Included"})]})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warranty Period"}),pe.jsx("input",{type:"text",value:c.warranty.period,onChange:e=>f("period",e.target.value),disabled:a,placeholder:"e.g., 1 year, 2 years",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warranty Type"}),pe.jsxs("select",{value:c.warranty.type,onChange:e=>f("type",e.target.value),disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[pe.jsx("option",{value:"manufacturer",children:"Manufacturer Warranty"}),pe.jsx("option",{value:"seller",children:"Seller Warranty"}),pe.jsx("option",{value:"none",children:"No Warranty"})]})]})]})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[pe.jsxs("div",{className:"flex items-center gap-3",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(j,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Additional Specifications"})]}),pe.jsxs("button",{type:"button",onClick:()=>{x(e=>({...e,specifications:[...e.specifications,{id:Date.now(),type:"dimension",name:"",value:"",unit:""}]}))},disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[pe.jsx(j,{size:16}),"Add Custom Spec"]})]}),0===c.specifications.length?pe.jsxs("div",{className:"text-center py-6 text-gray-500",children:[pe.jsx(g,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),pe.jsx("p",{className:"text-sm",children:"No additional specifications added"}),pe.jsx("p",{className:"text-xs",children:'Click "Add Custom Spec" to add more details'})]}):pe.jsx("div",{className:"space-y-4",children:c.specifications.map((e,s)=>{const t=ls.find(s=>s.value===e.type)?.icon||g;return pe.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[pe.jsx("div",{className:"p-1.5 bg-indigo-100 rounded",children:pe.jsx(t,{className:"w-4 h-4 text-indigo-600"})}),pe.jsxs("h4",{className:"font-medium text-gray-900",children:["Custom Spec ",s+1]}),pe.jsx("button",{type:"button",onClick:()=>(e=>{x(s=>({...s,specifications:s.specifications.filter((s,t)=>t!==e)}))})(s),disabled:a,className:"ml-auto text-red-500 hover:text-red-700 transition-colors",children:pe.jsx($,{size:14})})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),pe.jsx("select",{value:e.type,onChange:e=>u(s,"type",e.target.value),disabled:a,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:ls.map(e=>pe.jsx("option",{value:e.value,children:e.label},e.value))})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Name"}),pe.jsx("input",{type:"text",value:e.name,onChange:e=>u(s,"name",e.target.value),disabled:a,placeholder:"e.g., Capacity",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Value"}),pe.jsx("input",{type:"text",value:e.value,onChange:e=>u(s,"value",e.target.value),disabled:a,placeholder:"e.g., 4 people",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),pe.jsx("input",{type:"text",value:e.unit,onChange:e=>u(s,"unit",e.target.value),disabled:a,placeholder:"e.g., people, pieces",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]},e.id)})})]})]})]}),pe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[pe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[pe.jsx(W,{className:"w-5 h-5 text-indigo-600"}),"Delivery Options"]}),pe.jsxs("button",{type:"button",onClick:()=>{x(e=>({...e,deliveryOptions:[...e.deliveryOptions,{id:Date.now(),type:"standard",name:"",time:"",cost:0,available:!0}]}))},disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[pe.jsx(j,{size:16}),"Add Delivery Option"]})]}),0===c.deliveryOptions.length?pe.jsxs("div",{className:"text-center py-8 text-gray-500",children:[pe.jsx(W,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),pe.jsx("p",{children:"No delivery options added yet"}),pe.jsx("p",{className:"text-sm",children:'Click "Add Delivery Option" to get started'})]}):pe.jsx("div",{className:"space-y-4",children:c.deliveryOptions.map((e,s)=>pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-4",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(W,{className:"w-4 h-4 text-indigo-600"})}),pe.jsxs("h3",{className:"font-medium text-gray-900",children:["Delivery Option ",s+1]}),pe.jsx("button",{type:"button",onClick:()=>(e=>{x(s=>({...s,deliveryOptions:s.deliveryOptions.filter((s,t)=>t!==e)}))})(s),disabled:a,className:"ml-auto text-red-500 hover:text-red-700 transition-colors",children:pe.jsx($,{size:16})})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),pe.jsx("select",{value:e.type,onChange:e=>h(s,"type",e.target.value),disabled:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:ds.map(e=>pe.jsx("option",{value:e.value,children:e.label},e.value))})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),pe.jsx("input",{type:"text",value:e.name,onChange:e=>h(s,"name",e.target.value),disabled:a,placeholder:"e.g., Standard Delivery",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Time"}),pe.jsx("input",{type:"text",value:e.time,onChange:e=>h(s,"time",e.target.value),disabled:a,placeholder:"e.g., 3-5 business days",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost (KES)"}),pe.jsx("input",{type:"number",min:"0",value:e.cost,onChange:e=>h(s,"cost",parseFloat(e.target.value)||0),disabled:a,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsx("div",{className:"flex items-end",children:pe.jsxs("label",{className:"flex items-center gap-2",children:[pe.jsx("input",{type:"checkbox",checked:e.available,onChange:e=>h(s,"available",e.target.checked),disabled:a,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),pe.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Available"})]})})]})]},e.id))})]}),pe.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:pe.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4",children:[e&&pe.jsx("button",{type:"button",onClick:e,disabled:a,className:"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-xl transition-colors disabled:opacity-50",children:"Cancel"}),pe.jsxs("button",{type:"submit",disabled:a,className:"px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold rounded-xl flex items-center justify-center gap-2 transition-all disabled:opacity-50 shadow-lg hover:shadow-xl",children:[pe.jsx(H,{size:18}),a?"Creating Product...":"Create Product"]})]})})]})]})}},Symbol.toStringTag,{value:"Module"})),os=["Living Room","Bedroom","Office","Outdoor","Kitchen","Bathroom","Other"],cs=[{value:"dimension",label:"Dimension",icon:T},{value:"weight",label:"Weight",icon:U},{value:"material",label:"Material",icon:q},{value:"other",label:"Other",icon:g}],ms=[{value:"standard",label:"Standard Delivery"},{value:"express",label:"Express Delivery"},{value:"same_day",label:"Same Day Delivery"},{value:"pickup",label:"Store Pickup"}],xs=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{id:e}=o(),s=i(),[a,r]=t.useState(!0),[l,d]=t.useState(!1),[n,c]=t.useState(null),{invalidateProducts:x,invalidateProduct:u,invalidateCategories:h}=Ie(),[p,b]=t.useState({name:"",category:os[0],description:"",price:"",images:[],existingImages:[],specifications:[],deliveryOptions:[],dimensions:{length:"",width:"",height:"",unit:"cm"},weight:{value:"",unit:"kg"},material:"",color:"",assembly:"required",warranty:{period:"",type:"manufacturer"}});t.useEffect(()=>{e&&(async()=>{r(!0);try{const{data:s,error:t}=await ve.from("products").select("*").eq("id",e).single();if(t)throw t;const{data:a,error:i}=await ve.from("product_specifications").select("*").eq("product_id",e).order("display_order");if(i)throw i;const{data:r,error:l}=await ve.from("product_delivery_options").select("*").eq("product_id",e).order("delivery_cost");if(l)throw l;const d={dimensions:{length:"",width:"",height:"",unit:"cm"},weight:{value:"",unit:"kg"},material:"",color:"",assembly:"required",warranty:{period:"",type:"manufacturer"}},n=[];a?.forEach(e=>{switch(e.specification_name.toLowerCase()){case"length":d.dimensions.length=e.specification_value,d.dimensions.unit=e.unit||"cm";break;case"width":d.dimensions.width=e.specification_value;break;case"height":d.dimensions.height=e.specification_value;break;case"weight":d.weight.value=e.specification_value,d.weight.unit=e.unit||"kg";break;case"material":d.material=e.specification_value;break;case"color":d.color=e.specification_value;break;case"assembly":e.specification_value.includes("Required")?d.assembly="required":e.specification_value.includes("Not Required")?d.assembly="not_required":e.specification_value.includes("Included")&&(d.assembly="included");break;case"warranty":const s=e.specification_value.match(/(.+?)\s*\((.+?)\)/);s&&(d.warranty.period=s[1],d.warranty.type=s[2]);break;default:n.push({id:e.id,type:e.specification_type,name:e.specification_name,value:e.specification_value,unit:e.unit||""})}}),b({name:s.name||"",category:s.category||os[0],description:s.description||"",price:s.price||"",images:[],existingImages:s.images||[],specifications:n,deliveryOptions:r?.map(e=>({id:e.id,type:e.delivery_type,name:e.delivery_name,time:e.delivery_time,cost:e.delivery_cost,available:e.is_available}))||[],...d})}catch(s){c("Failed to load product details.")}finally{r(!1)}})()},[e]);const f=(e,s,t)=>{b(a=>({...a,specifications:a.specifications.map((a,i)=>i===e?{...a,[s]:t}:a)}))},y=(e,s,t)=>{b(a=>({...a,deliveryOptions:a.deliveryOptions.map((a,i)=>i===e?{...a,[s]:t}:a)}))},v=(e,s)=>{b(t=>({...t,dimensions:{...t.dimensions,[e]:s}}))},N=(e,s)=>{b(t=>({...t,weight:{...t.weight,[e]:s}}))},w=(e,s)=>{b(t=>({...t,warranty:{...t.warranty,[e]:s}}))};return a?pe.jsx("div",{className:"space-y-6",children:pe.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:pe.jsxs("div",{className:"animate-pulse",children:[pe.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),pe.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})}):n?pe.jsx("div",{className:"space-y-6",children:pe.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:pe.jsxs("div",{className:"text-center text-red-600",children:[pe.jsx("p",{children:n}),pe.jsx("button",{onClick:()=>s("/dashboard/products"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Back to Products"})]})})}):pe.jsxs("div",{className:"space-y-6",children:[pe.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:pe.jsxs("div",{className:"flex justify-between items-center",children:[pe.jsxs("div",{children:[pe.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Edit Product"}),pe.jsx("p",{className:"text-gray-600 mt-1",children:"Update product details and specifications"})]}),pe.jsx("button",{onClick:()=>s("/dashboard/products"),disabled:l,className:"text-gray-400 hover:text-red-500 transition-colors p-2 hover:bg-red-50 rounded-full","aria-label":"Go back",children:pe.jsx(m,{size:24})})]})}),n&&pe.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl flex items-center gap-2",children:[pe.jsx(m,{size:20}),n]}),pe.jsxs("form",{onSubmit:t=>{t.preventDefault(),(async()=>{if(c(null),p.name.trim()&&p.category.trim()&&p.description.trim()&&!(p.price<=0)){d(!0);try{const{error:t}=await ve.from("products").update({name:p.name,category:p.category,description:p.description,price:p.price}).eq("id",e);if(t)throw t;const a=[];for(const s of p.images){const t=s.name.split(".").pop(),i=`${e}/${Date.now()}-${Math.random().toString(36).substring(2,9)}.${t}`,{error:r}=await ve.storage.from("product-images").upload(i,s);if(r)throw r;const{data:l}=ve.storage.from("product-images").getPublicUrl(i);a.push(l.publicUrl);const{error:d}=await ve.from("product_images").insert([{product_id:e,url:l.publicUrl}]);if(d)throw d}const i=[...p.existingImages,...a],{error:r}=await ve.from("products").update({images:i}).eq("id",e);if(r)throw r;await ve.from("product_specifications").delete().eq("product_id",e),await ve.from("product_delivery_options").delete().eq("product_id",e);const l=[];(p.dimensions.length||p.dimensions.width||p.dimensions.height)&&(p.dimensions.length&&l.push({product_id:e,specification_type:"dimension",specification_name:"Length",specification_value:p.dimensions.length,unit:p.dimensions.unit,display_order:1}),p.dimensions.width&&l.push({product_id:e,specification_type:"dimension",specification_name:"Width",specification_value:p.dimensions.width,unit:p.dimensions.unit,display_order:2}),p.dimensions.height&&l.push({product_id:e,specification_type:"dimension",specification_name:"Height",specification_value:p.dimensions.height,unit:p.dimensions.unit,display_order:3})),p.weight.value&&l.push({product_id:e,specification_type:"weight",specification_name:"Weight",specification_value:p.weight.value,unit:p.weight.unit,display_order:4}),p.material&&l.push({product_id:e,specification_type:"material",specification_name:"Material",specification_value:p.material,unit:null,display_order:5}),p.color&&l.push({product_id:e,specification_type:"other",specification_name:"Color",specification_value:p.color,unit:null,display_order:6}),p.assembly&&l.push({product_id:e,specification_type:"other",specification_name:"Assembly",specification_value:"required"===p.assembly?"Assembly Required":"not_required"===p.assembly?"No Assembly Required":"Assembly Included",unit:null,display_order:7}),p.warranty.period&&l.push({product_id:e,specification_type:"other",specification_name:"Warranty",specification_value:`${p.warranty.period} (${p.warranty.type})`,unit:null,display_order:8});const d=p.specifications.filter(e=>e.name.trim()&&e.value.trim()).map((s,t)=>({product_id:e,specification_type:s.type,specification_name:s.name,specification_value:s.value,unit:s.unit||null,display_order:l.length+t+1}));if(l.push(...d),l.length>0){const{error:e}=await ve.from("product_specifications").insert(l);if(e)throw e}if(p.deliveryOptions.length>0){const s=p.deliveryOptions.filter(e=>e.name.trim()&&e.time.trim()).map(s=>({product_id:e,delivery_type:s.type,delivery_name:s.name,delivery_time:s.time,delivery_cost:parseFloat(s.cost)||0,is_available:s.available}));if(s.length>0){const{error:e}=await ve.from("product_delivery_options").insert(s);if(e)throw e}}x(),u(e),h(),be("Product updated successfully!"),s("/dashboard/products")}catch(t){c("Failed to update product. Please try again.")}finally{d(!1)}}else c("Please fill in all fields with valid values.")})()},className:"space-y-6",children:[pe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[pe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[pe.jsx(g,{className:"w-5 h-5 text-indigo-600"}),"Basic Information"]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[pe.jsxs("div",{className:"md:col-span-2",children:[pe.jsx("label",{htmlFor:"product-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),pe.jsx("input",{type:"text",id:"product-name",value:p.name,onChange:e=>b({...p,name:e.target.value}),disabled:l,required:!0,placeholder:"Enter product name",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 transition-colors"})]}),pe.jsxs("div",{children:[pe.jsx("label",{htmlFor:"product-category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),pe.jsx("select",{id:"product-category",value:p.category,onChange:e=>b({...p,category:e.target.value}),disabled:l,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 transition-colors",children:os.map(e=>pe.jsx("option",{value:e,children:e},e))})]}),pe.jsxs("div",{children:[pe.jsx("label",{htmlFor:"product-price",className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (KES) *"}),pe.jsx("input",{type:"number",id:"product-price",min:0,value:p.price,onChange:e=>b({...p,price:Number(e.target.value)}),disabled:l,required:!0,placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 transition-colors"})]}),pe.jsxs("div",{className:"md:col-span-2",children:[pe.jsx("label",{htmlFor:"product-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),pe.jsx("textarea",{id:"product-description",value:p.description,onChange:e=>b({...p,description:e.target.value}),rows:4,disabled:l,required:!0,placeholder:"Describe your product in detail...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none disabled:opacity-50 transition-colors"})]})]})]}),pe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[pe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[pe.jsx(g,{className:"w-5 h-5 text-indigo-600"}),"Product Images"]}),p.existingImages.length>0&&pe.jsxs("div",{className:"mb-6",children:[pe.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Current Images"}),pe.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:p.existingImages.map((e,s)=>pe.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-gray-200 hover:border-indigo-300 transition-colors",children:[pe.jsx("img",{src:e,alt:`Current image ${s+1}`,className:"w-full h-32 object-cover"}),pe.jsx("button",{type:"button",onClick:()=>{return e=s,void b(s=>({...s,existingImages:s.existingImages.filter((s,t)=>t!==e)}));var e},disabled:l,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all","aria-label":"Remove image",children:pe.jsx(m,{size:14})})]},s))})]}),pe.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-indigo-400 transition-colors",children:[pe.jsx("input",{id:"product-images",type:"file",multiple:!0,accept:"image/*",onChange:e=>{b(s=>({...s,images:[...s.images,...Array.from(e.target.files)]}))},disabled:l,className:"hidden"}),pe.jsxs("label",{htmlFor:"product-images",className:"cursor-pointer flex flex-col items-center gap-2",children:[pe.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:pe.jsx(g,{className:"w-6 h-6 text-indigo-600"})}),pe.jsxs("div",{children:[pe.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Add more product images"}),pe.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB each"})]})]})]}),p.images.length>0&&pe.jsxs("div",{className:"mt-6",children:[pe.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"New Images to Upload"}),pe.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:p.images.map((e,s)=>{const t=URL.createObjectURL(e);return pe.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-gray-200 hover:border-indigo-300 transition-colors",children:[pe.jsx("img",{src:t,alt:`New image ${s+1}`,className:"w-full h-32 object-cover"}),pe.jsx("button",{type:"button",onClick:()=>{return e=s,void b(s=>({...s,images:s.images.filter((s,t)=>t!==e)}));var e},disabled:l,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all","aria-label":"Remove image",children:pe.jsx(m,{size:14})})]},s)})})]})]}),pe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[pe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[pe.jsx(T,{className:"w-5 h-5 text-indigo-600"}),"Product Specifications"]}),pe.jsxs("div",{className:"space-y-8",children:[pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(T,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dimensions"})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Length"}),pe.jsx("input",{type:"number",value:p.dimensions.length,onChange:e=>v("length",e.target.value),disabled:l,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Width"}),pe.jsx("input",{type:"number",value:p.dimensions.width,onChange:e=>v("width",e.target.value),disabled:l,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Height"}),pe.jsx("input",{type:"number",value:p.dimensions.height,onChange:e=>v("height",e.target.value),disabled:l,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),pe.jsxs("select",{value:p.dimensions.unit,onChange:e=>v("unit",e.target.value),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[pe.jsx("option",{value:"cm",children:"Centimeters (cm)"}),pe.jsx("option",{value:"inches",children:"Inches"}),pe.jsx("option",{value:"mm",children:"Millimeters (mm)"}),pe.jsx("option",{value:"ft",children:"Feet"})]})]})]})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(U,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Weight"})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight Value"}),pe.jsx("input",{type:"number",value:p.weight.value,onChange:e=>N("value",e.target.value),disabled:l,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),pe.jsxs("select",{value:p.weight.unit,onChange:e=>N("unit",e.target.value),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[pe.jsx("option",{value:"kg",children:"Kilograms (kg)"}),pe.jsx("option",{value:"lbs",children:"Pounds (lbs)"}),pe.jsx("option",{value:"g",children:"Grams (g)"})]})]})]})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(q,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Material & Color"})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material"}),pe.jsx("input",{type:"text",value:p.material,onChange:e=>b({...p,material:e.target.value}),disabled:l,placeholder:"e.g., Oak Wood, Metal, Fabric",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),pe.jsx("input",{type:"text",value:p.color,onChange:e=>b({...p,color:e.target.value}),disabled:l,placeholder:"e.g., Brown, Black, White",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(g,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Assembly & Warranty"})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assembly Required"}),pe.jsxs("select",{value:p.assembly,onChange:e=>b({...p,assembly:e.target.value}),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[pe.jsx("option",{value:"required",children:"Assembly Required"}),pe.jsx("option",{value:"not_required",children:"No Assembly Required"}),pe.jsx("option",{value:"included",children:"Assembly Included"})]})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warranty Period"}),pe.jsx("input",{type:"text",value:p.warranty.period,onChange:e=>w("period",e.target.value),disabled:l,placeholder:"e.g., 1 year, 2 years",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warranty Type"}),pe.jsxs("select",{value:p.warranty.type,onChange:e=>w("type",e.target.value),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[pe.jsx("option",{value:"manufacturer",children:"Manufacturer Warranty"}),pe.jsx("option",{value:"seller",children:"Seller Warranty"}),pe.jsx("option",{value:"none",children:"No Warranty"})]})]})]})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[pe.jsxs("div",{className:"flex items-center gap-3",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(j,{className:"w-5 h-5 text-indigo-600"})}),pe.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Additional Specifications"})]}),pe.jsxs("button",{type:"button",onClick:()=>{b(e=>({...e,specifications:[...e.specifications,{id:Date.now(),type:"dimension",name:"",value:"",unit:""}]}))},disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[pe.jsx(j,{size:16}),"Add Custom Spec"]})]}),0===p.specifications.length?pe.jsxs("div",{className:"text-center py-6 text-gray-500",children:[pe.jsx(g,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),pe.jsx("p",{className:"text-sm",children:"No additional specifications added"}),pe.jsx("p",{className:"text-xs",children:'Click "Add Custom Spec" to add more details'})]}):pe.jsx("div",{className:"space-y-4",children:p.specifications.map((e,s)=>{const t=cs.find(s=>s.value===e.type)?.icon||g;return pe.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[pe.jsx("div",{className:"p-1.5 bg-indigo-100 rounded",children:pe.jsx(t,{className:"w-4 h-4 text-indigo-600"})}),pe.jsxs("h4",{className:"font-medium text-gray-900",children:["Custom Spec ",s+1]}),pe.jsx("button",{type:"button",onClick:()=>(e=>{b(s=>({...s,specifications:s.specifications.filter((s,t)=>t!==e)}))})(s),disabled:l,className:"ml-auto text-red-500 hover:text-red-700 transition-colors",children:pe.jsx($,{size:14})})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),pe.jsx("select",{value:e.type,onChange:e=>f(s,"type",e.target.value),disabled:l,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:cs.map(e=>pe.jsx("option",{value:e.value,children:e.label},e.value))})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Name"}),pe.jsx("input",{type:"text",value:e.name,onChange:e=>f(s,"name",e.target.value),disabled:l,placeholder:"e.g., Capacity",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Value"}),pe.jsx("input",{type:"text",value:e.value,onChange:e=>f(s,"value",e.target.value),disabled:l,placeholder:"e.g., 4 people",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),pe.jsx("input",{type:"text",value:e.unit,onChange:e=>f(s,"unit",e.target.value),disabled:l,placeholder:"e.g., people, pieces",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]},e.id)})})]})]})]}),pe.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[pe.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[pe.jsx(W,{className:"w-5 h-5 text-indigo-600"}),"Delivery Options"]}),pe.jsxs("button",{type:"button",onClick:()=>{b(e=>({...e,deliveryOptions:[...e.deliveryOptions,{id:Date.now(),type:"standard",name:"",time:"",cost:0,available:!0}]}))},disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[pe.jsx(j,{size:16}),"Add Delivery Option"]})]}),0===p.deliveryOptions.length?pe.jsxs("div",{className:"text-center py-8 text-gray-500",children:[pe.jsx(W,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),pe.jsx("p",{children:"No delivery options added yet"}),pe.jsx("p",{className:"text-sm",children:'Click "Add Delivery Option" to get started'})]}):pe.jsx("div",{className:"space-y-4",children:p.deliveryOptions.map((e,s)=>pe.jsxs("div",{className:"border border-gray-200 rounded-xl p-4",children:[pe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[pe.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:pe.jsx(W,{className:"w-4 h-4 text-indigo-600"})}),pe.jsxs("h3",{className:"font-medium text-gray-900",children:["Delivery Option ",s+1]}),pe.jsx("button",{type:"button",onClick:()=>(e=>{b(s=>({...s,deliveryOptions:s.deliveryOptions.filter((s,t)=>t!==e)}))})(s),disabled:l,className:"ml-auto text-red-500 hover:text-red-700 transition-colors",children:pe.jsx($,{size:16})})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),pe.jsx("select",{value:e.type,onChange:e=>y(s,"type",e.target.value),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:ms.map(e=>pe.jsx("option",{value:e.value,children:e.label},e.value))})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),pe.jsx("input",{type:"text",value:e.name,onChange:e=>y(s,"name",e.target.value),disabled:l,placeholder:"e.g., Standard Delivery",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Time"}),pe.jsx("input",{type:"text",value:e.time,onChange:e=>y(s,"time",e.target.value),disabled:l,placeholder:"e.g., 3-5 business days",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost (KES)"}),pe.jsx("input",{type:"number",min:"0",value:e.cost,onChange:e=>y(s,"cost",parseFloat(e.target.value)||0),disabled:l,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),pe.jsx("div",{className:"flex items-end",children:pe.jsxs("label",{className:"flex items-center gap-2",children:[pe.jsx("input",{type:"checkbox",checked:e.available,onChange:e=>y(s,"available",e.target.checked),disabled:l,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),pe.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Available"})]})})]})]},e.id))})]}),pe.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:pe.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4",children:[pe.jsx("button",{type:"button",onClick:()=>s("/dashboard/products"),disabled:l,className:"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-xl transition-colors disabled:opacity-50",children:"Cancel"}),pe.jsxs("button",{type:"submit",disabled:l,className:"px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold rounded-xl flex items-center justify-center gap-2 transition-all disabled:opacity-50 shadow-lg hover:shadow-xl",children:[pe.jsx(H,{size:18}),l?"Updating Product...":"Update Product"]})]})})]})]})}},Symbol.toStringTag,{value:"Module"}));export{Je as D,fe as a,ve as b,Ce as c,Ee as d,Oe as e,Ae as f,ke as g,De as h,$e as i,pe as j,Re as k,ye as l,be as s,ze as u};
