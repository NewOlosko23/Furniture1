import{j as e,s,a,h as t,b as r,c as i,d as l,g as n,e as c,f as o,u as d,i as m,k as x}from"./dashboard-Dz-knta4.js";import{r as g,u as h,f as u,L as p,e as j,g as y}from"./router-vendor-DfO8ZQAf.js";import{N as b,R as f,O as N,Q as v,X as w,V as C,Y as S,E as k,S as _,Z as A,_ as P,$ as D,a0 as L,j as $,a1 as I,a2 as R,o as T,W as O,a3 as F,P as M,a4 as E,p as B,t as H,s as q,h as z}from"./ui-vendor-C3HAkryH.js";import{d as U}from"./charts-vendor-D6BWP-Ru.js";const Q=g.createContext(),W={cartItems:JSON.parse(localStorage.getItem("cartItems"))||[]};function Y(e,s){switch(s.type){case"ADD_TO_CART":{const a=e.cartItems.find(e=>e.id===s.payload.id);return{...e,cartItems:a?e.cartItems.map(e=>e.id===s.payload.id?{...e,quantity:e.quantity+1}:e):[...e.cartItems,{...s.payload,quantity:1}]}}case"REMOVE_FROM_CART":return{...e,cartItems:e.cartItems.filter(e=>e.id!==s.payload)};case"CLEAR_CART":return{...e,cartItems:[]};case"UPDATE_QUANTITY":{const{id:a,amount:t}=s.payload;return{...e,cartItems:e.cartItems.map(e=>e.id===a?{...e,quantity:Math.max(1,e.quantity+t)}:e).filter(e=>e.quantity>0)}}default:return e}}const V=({children:t})=>{const[r,i]=g.useReducer(Y,W);g.useEffect(()=>{localStorage.setItem("cartItems",JSON.stringify(r.cartItems))},[r.cartItems]);return e.jsx(Q.Provider,{value:{cartItems:r.cartItems,addToCart:e=>r.cartItems.find(s=>s.id===e.id)?(a("Item is already in your cart"),!1):(i({type:"ADD_TO_CART",payload:e}),s(`${e.name} added to cart`),!0),removeFromCart:e=>{const a=r.cartItems.find(s=>s.id===e);i({type:"REMOVE_FROM_CART",payload:e}),a&&s(`${a.name} removed from cart`)},clearCart:()=>{i({type:"CLEAR_CART"}),s("Cart cleared")},updateQuantity:(e,s)=>i({type:"UPDATE_QUANTITY",payload:{id:e,amount:s}})},children:t})},K=()=>g.useContext(Q),G=({children:s,className:a,as:t="div",maxWidth:r="7xl",padding:i="responsive",center:l=!0,...n})=>{const c=U({"3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl",full:"max-w-full"}[r],l&&"mx-auto",{none:"",sm:"px-4",md:"px-6",lg:"px-8",responsive:"px-4 sm:px-6 lg:px-8","responsive-lg":"px-6 md:px-12"}[i],a);return e.jsx(t,{className:c,...n,children:s})};const Z=new class{constructor(){this.preloadQueue=new Set,this.isPreloading=!1,this.preloadHistory=new Map}async preloadEssentialData(){const e=[{type:"products",priority:"high"},{type:"categories",priority:"high"}];for(const s of e)t(s.type)||await this.preloadData(s.type)}async preloadByRoute(e){const s={"/":["products","categories"],"/browse":["products","categories"],"/dashboard":["orders","analytics","chartData","activities"],"/product":["products"],"/category":["products","categories"]}[e]||[];for(const a of s)t(a)||this.preloadQueue.has(a)||(this.preloadQueue.add(a),this.preloadData(a))}async preloadRelatedData(e){try{const{data:s}=await r.from("products").select("category").eq("id",e).single();if(s?.category){const e=`category_${s.category.toLowerCase().replace(/\s+/g,"_")}`;t("products",e)||await this.preloadProductsByCategory(s.category)}}catch(s){}}async preloadByBehavior(e,s={}){switch(e){case"view_product":s.productId&&await this.preloadRelatedData(s.productId);break;case"browse_category":if(s.category){const e=`category_${s.category.toLowerCase().replace(/\s+/g,"_")}`;t("products",e)||await this.preloadProductsByCategory(s.category)}break;case"dashboard_view":t("orders")||await this.preloadData("orders"),t("analytics")||await this.preloadData("analytics")}}async preloadData(e){if(!this.preloadQueue.has(e)){this.preloadQueue.add(e);try{switch(e){case"products":await this.preloadProducts();break;case"categories":await this.preloadCategories();break;case"orders":await this.preloadOrders();break;case"analytics":await this.preloadAnalytics();break;case"chartData":await this.preloadChartData();break;case"activities":await this.preloadActivities()}}catch(s){}finally{this.preloadQueue.delete(e)}}}async preloadProducts(){try{const{data:e,error:s}=await r.from("products").select("*").order("id",{ascending:!1});!s&&e&&(i("products",e),this.recordPreload("products"))}catch(e){}}async preloadProductsByCategory(e){try{const{data:s,error:a}=await r.from("products").select("*").eq("category",e).order("id",{ascending:!1});if(!a&&s){const a=`category_${e.toLowerCase().replace(/\s+/g,"_")}`;i("products",s,a),this.recordPreload(`products_${a}`)}}catch(s){}}async preloadCategories(){try{const{data:e,error:s}=await r.from("products").select("category").not("category","is",null);if(!s&&e){const s=[...new Set(e.map(e=>e.category))].sort();i("categories",s),this.recordPreload("categories")}}catch(e){}}async preloadOrders(){try{const{data:e,error:s}=await r.from("orders").select("*").order("created_at",{ascending:!1});!s&&e&&(i("orders",e),this.recordPreload("orders"))}catch(e){}}async preloadAnalytics(){try{const{data:e,error:s}=await r.from("orders").select("*").order("created_at",{ascending:!1});if(!s&&e){const s=this.calculateAnalytics(e);i("analytics",s),this.recordPreload("analytics")}}catch(e){}}async preloadChartData(){try{const{data:e,error:s}=await r.from("orders").select("*").order("created_at",{ascending:!0});!s&&e&&(i("chartData",e),this.recordPreload("chartData"))}catch(e){}}async preloadActivities(){try{const[e,s]=await Promise.all([r.from("orders").select("*").order("created_at",{ascending:!1}).limit(8),r.from("products").select("*").order("id",{ascending:!1}).limit(8)]);if(!e.error&&!s.error){const{data:a}=e,{data:t}=s,r=(a||[]).map(e=>({id:`order-${e.id}`,type:"order",action:"New order received",item:`Order #${e.id}`,time:e.created_at,amount:e.total_amount})),l=(t||[]).map(e=>({id:`product-${e.id}`,type:"product",action:"Product added",item:e.name,time:(new Date).toISOString(),amount:e.price})),n=[...r,...l].sort((e,s)=>new Date(s.time)-new Date(e.time)).slice(0,10);i("activities",n),this.recordPreload("activities")}}catch(e){}}calculateAnalytics(e){if(!e.length)return{totalOrders:0,totalRevenue:0,pendingOrders:0,completedOrders:0,averageOrderValue:0,monthlyRevenue:0,monthlyOrders:0,revenueGrowth:0,ordersGrowth:0};const s=e.length,a=e.reduce((e,s)=>e+(s.total_amount||0),0),t=e.filter(e=>"pending"===e.status).length,r=e.filter(e=>"closed"===e.status).length,i=s>0?a/s:0,l=new Date,n=l.getMonth(),c=l.getFullYear(),o=0===n?11:n-1,d=0===n?c-1:c,m=e.filter(e=>{const s=new Date(e.created_at);return s.getMonth()===n&&s.getFullYear()===c}),x=e.filter(e=>{const s=new Date(e.created_at);return s.getMonth()===o&&s.getFullYear()===d}),g=m.reduce((e,s)=>e+(s.total_amount||0),0),h=m.length,u=x.reduce((e,s)=>e+(s.total_amount||0),0),p=x.length;return{totalOrders:s,totalRevenue:a,pendingOrders:t,completedOrders:r,averageOrderValue:i,monthlyRevenue:g,monthlyOrders:h,revenueGrowth:u>0?(g-u)/u*100:0,ordersGrowth:p>0?(h-p)/p*100:0}}recordPreload(e){this.preloadHistory.set(e,{timestamp:Date.now(),success:!0})}getPreloadStats(){return{queueSize:this.preloadQueue.size,historySize:this.preloadHistory.size,isPreloading:this.isPreloading,recentPreloads:Array.from(this.preloadHistory.entries()).sort((e,s)=>s[1].timestamp-e[1].timestamp).slice(0,10)}}cleanupHistory(){const e=Date.now()-36e5;for(const[s,a]of this.preloadHistory.entries())a.timestamp<e&&this.preloadHistory.delete(s)}async smartPreload(){l(),this.cleanupHistory();const e=["products","categories","orders","analytics","chartData","activities"];for(const s of e){const e=n(s);e&&e.isStale&&!this.preloadQueue.has(s)&&this.preloadData(s)}}},J=()=>{const e=h(),[s,a]=g.useState(null),[r,i]=g.useState(!1),n=g.useCallback(()=>{const e=c(),s=Z.getPreloadStats();a({...e,preload:s})},[]),d=g.useCallback(async e=>{i(!0);try{await Z.preloadByRoute(e)}catch(s){}finally{i(!1)}},[]),m=g.useCallback(async(e,s)=>{try{await Z.preloadByBehavior(e,s)}catch(a){}},[]),x=g.useCallback(()=>o()>5242880&&(l(),!0),[]);return g.useEffect(()=>{(async()=>{try{await Z.preloadEssentialData(),n()}catch(e){}})()},[n]),g.useEffect(()=>{d(e.pathname)},[e.pathname,d]),g.useEffect(()=>{const e=setInterval(()=>{x(),n()},6e4);return()=>clearInterval(e)},[x,n]),g.useEffect(()=>{const e=setInterval(()=>{Z.smartPreload()},3e5);return()=>clearInterval(e)},[]),{cacheStats:s,isPreloading:r,updateStats:n,preloadForRoute:d,preloadForBehavior:m,checkCacheHealth:x,hasValidCache:t}},X=()=>e.jsxs("div",{className:"flex flex-col rounded-xl border border-gray-200 shadow-sm overflow-hidden animate-pulse",children:[e.jsx("div",{className:"w-full h-48 bg-gray-200"}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2 w-3/4"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded mb-4 w-1/2"}),e.jsx("div",{className:"mt-auto",children:e.jsx("div",{className:"h-10 bg-gray-200 rounded-full w-full"})})]})]}),ee=({children:s,delay:a=0,className:t=""})=>e.jsx("div",{className:`opacity-0 translate-y-4 transition-all duration-700 ease-out ${t}`,style:{animation:`fadeInUp 0.7s ease-out ${a}ms forwards`},children:s}),se=({children:s,className:a=""})=>e.jsx("div",{className:a,children:u.Children.map(s,(s,a)=>e.jsx(ee,{delay:100*a,children:s},a))}),ae=()=>e.jsx("main",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8 animate-pulse",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-48"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 mb-12",children:[e.jsxs("section",{children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-full h-80 sm:h-96 lg:h-[400px] bg-gray-200 rounded-lg animate-pulse"})}),e.jsx("div",{className:"flex gap-2 mt-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-md animate-pulse"},s))})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 animate-pulse"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"w-9 h-9 bg-gray-200 rounded-lg animate-pulse"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse"},s))}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})]}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-24 mb-2 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6 animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"}),e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-md",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 animate-pulse"}),e.jsx("div",{className:"w-12 h-8 bg-gray-200 animate-pulse"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 animate-pulse"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-12 mb-1 animate-pulse"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-20 animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-1 h-12 bg-gray-200 rounded-md animate-pulse"}),e.jsx("div",{className:"flex-1 h-12 bg-gray-200 rounded-md animate-pulse"})]}),e.jsx("div",{className:"w-full h-12 bg-gray-200 rounded-md animate-pulse"})]})]})]})]}),e.jsx("div",{className:"mb-12",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24 animate-pulse"})]})]},s))})]})}),e.jsxs("section",{className:"mb-12",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-40 mb-6 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-200"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-24 mb-4 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-32 animate-pulse"})]})]},s))})]})]})});const te=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{addToCart:s}=K(),{products:a,loading:t,error:r,refresh:i,lastUpdated:l}=d(),[n,c]=g.useState(""),[o,m]=g.useState("All"),[x,h]=g.useState("All"),[u,j]=g.useState([0,1e5]),[y,A]=g.useState("relevance"),[P,D]=g.useState("grid"),[L,$]=g.useState(6),I=a.filter(e=>{const s=e.name?.toLowerCase()||"",a=e.category?.toLowerCase()||"",t=e.type?.toLowerCase()||"",r=n.toLowerCase(),i=""===r||s.includes(r)||a.includes(r)||t.includes(r),l="All"===o||e.category?.toLowerCase()===o.toLowerCase(),c="All"===x||e.type?.toLowerCase()===x.toLowerCase(),d=e.price>=u[0]&&e.price<=u[1];return i&&l&&c&&d}),R=[...I].sort((e,s)=>{switch(y){case"price-low":return e.price-s.price;case"price-high":return s.price-e.price;case"name":return e.name?.localeCompare(s.name);case"newest":return new Date(s.created_at||0)-new Date(e.created_at||0);default:return 0}}),T=R.slice(0,L),O=()=>{i(),$(6)},F=()=>{c(""),m("All"),h("All"),j([0,1e5]),A("relevance"),$(6)};return t&&0===a.length?e.jsx("main",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx(G,{children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})})}):e.jsx("main",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100",children:e.jsxs(G,{className:"py-12",padding:"responsive-lg",children:[e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-100 text-indigo-800 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"Browse Collection"})]}),e.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 leading-tight mb-6",children:["Discover Our",e.jsx("span",{className:"block text-indigo-600",children:"Furniture Collection"})]}),e.jsx("p",{className:"text-xl text-gray-600 leading-relaxed max-w-2xl mx-auto",children:"Explore our curated selection of handcrafted furniture pieces designed to transform your space."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/20",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold text-indigo-600",children:I.length})," product",1!==I.length?"s":""," available"]})}),l&&e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/20",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Updated: ",new Date(l).toLocaleTimeString()]})})]}),e.jsxs("button",{onClick:O,disabled:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300",title:"Refresh data from server",children:[e.jsx(f,{className:"h-4 w-4 "+(t?"animate-spin":"")}),"Refresh"]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 space-y-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-indigo-600"}),"Filters"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search products...",value:n,onChange:e=>c(e.target.value),className:"w-full rounded-xl border border-gray-200 bg-gray-50 py-3 pl-10 pr-4 text-sm placeholder-gray-400 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:bg-white transition-all duration-300"}),e.jsx(v,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),n&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-300",children:e.jsx(w,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Category"}),e.jsx("div",{className:"space-y-3",children:["All","Living Room","Bedroom","Office","Outdoor"].map(s=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"category",value:s,checked:o===s,onChange:e=>m(e.target.value),className:"text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-600 group-hover:text-indigo-600 transition-colors duration-300",children:s})]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Type"}),e.jsx("div",{className:"space-y-3",children:["All","Sofa","Chair","Table","Bed","Bookshelf"].map(s=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"type",value:s,checked:x===s,onChange:e=>h(e.target.value),className:"text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-600 group-hover:text-indigo-600 transition-colors duration-300",children:s})]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Price Range"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:u[0],onChange:e=>j([parseInt(e.target.value)||0,u[1]]),className:"w-full px-3 py-2 border border-gray-200 bg-gray-50 rounded-xl text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:bg-white transition-all duration-300"}),e.jsx("input",{type:"number",placeholder:"Max",value:u[1],onChange:e=>j([u[0],parseInt(e.target.value)||1e5]),className:"w-full px-3 py-2 border border-gray-200 bg-gray-50 rounded-xl text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:bg-white transition-all duration-300"})]})})]}),e.jsx("button",{onClick:F,className:"w-full px-4 py-3 border border-gray-200 text-gray-700 rounded-xl hover:border-indigo-300 hover:text-indigo-600 hover:bg-indigo-50 transition-all duration-300 text-sm font-medium",children:"Clear All Filters"})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("select",{value:y,onChange:e=>A(e.target.value),className:"px-4 py-2 border border-gray-200 bg-gray-50 rounded-xl text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:bg-white transition-all duration-300",children:[e.jsx("option",{value:"relevance",children:"Sort by Relevance"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"name",children:"Name: A to Z"}),e.jsx("option",{value:"newest",children:"Newest First"})]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/80 backdrop-blur-sm rounded-xl p-1 border border-white/20",children:[e.jsx("button",{onClick:()=>D("grid"),className:"p-2 rounded-lg transition-all duration-300 "+("grid"===P?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),children:e.jsx(C,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>D("list"),className:"p-2 rounded-lg transition-all duration-300 "+("list"===P?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),children:e.jsx(S,{className:"h-5 w-5"})})]})]}),r?e.jsxs("div",{className:"text-center py-20",children:[e.jsxs("p",{className:"text-red-600 text-lg mb-4",children:["Error loading products: ",r]}),e.jsx("button",{onClick:O,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]}):0===T.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(b,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or search terms"}),e.jsx("button",{onClick:F,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:"Clear Filters"})]}):e.jsx("div",{className:"grid gap-6 "+("grid"===P?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:T.map(a=>{return e.jsxs("div",{className:"group bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 border border-white/20 "+("list"===P?"flex gap-6 p-6":"p-6"),children:[e.jsx(p,{to:`/product/${a.slug||a.id}`,className:""+("list"===P?"w-48 flex-shrink-0":""),children:e.jsxs("div",{className:"relative overflow-hidden rounded-xl",children:[e.jsx("img",{src:a.image_url||a.images?.[0]||"/placeholder-furniture.jpg",alt:a.name,className:"w-full object-cover transition-all duration-500 group-hover:scale-110 "+("list"===P?"h-32":"h-48")}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),e.jsxs("div",{className:""+("list"===P?"flex-1":"mt-4"),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 gap-3",children:[e.jsx(p,{to:`/product/${a.slug||a.id}`,className:"text-lg font-semibold text-gray-900 hover:text-indigo-600 transition-colors flex-1 min-w-0",title:a.name,children:e.jsx("span",{className:"block truncate",children:a.name})}),e.jsx("span",{className:"text-lg font-bold text-indigo-600 flex-shrink-0 whitespace-nowrap",children:(t=a.price,`KES ${t?.toLocaleString(void 0,{minimumFractionDigits:2})??"N/A"}`)})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"capitalize",children:a.category}),a.type&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:a.type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{to:`/product/${a.slug||a.id}`,className:"p-2 text-gray-400 hover:text-indigo-600 transition-colors duration-300",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>(e=>{s({id:e.id,name:e.name,price:e.price,image:e.image_url||e.images?.[0],quantity:1})})(a),className:"p-2 bg-indigo-100 text-indigo-600 rounded-xl hover:bg-indigo-200 transition-colors duration-300",children:e.jsx(_,{className:"h-4 w-4"})})]})]})]})]},a.id);var t})}),!t&&L<R.length&&e.jsx("div",{className:"flex justify-center mt-12",children:e.jsx("button",{onClick:()=>{$(e=>Math.min(e+6,R.length))},className:"bg-indigo-600 text-white rounded-xl px-8 py-3 font-semibold hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-300 shadow-lg hover:shadow-xl","aria-label":"Load more products",children:"Load More Products"})})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),re=({items:s=[]})=>s&&0!==s.length?e.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-indigo-600 mb-6","aria-label":"Breadcrumb",children:[e.jsx(p,{to:"/",className:"flex items-center hover:text-indigo-800 transition-colors","aria-label":"Home",children:e.jsx(A,{className:"w-4 h-4"})}),s.map((a,t)=>e.jsxs(u.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 text-indigo-400"}),t===s.length-1?e.jsx("span",{className:"text-indigo-900 font-medium","aria-current":"page",children:a.label}):e.jsx(p,{to:a.href,className:"hover:text-indigo-800 transition-colors",children:a.label})]},t))]}):null,ie=({children:s,className:a,variant:t="primary",onClick:r,disabled:i=!1,...l})=>e.jsx("button",{onClick:r,disabled:i,className:U("inline-flex items-center justify-center rounded-full px-6 py-2 font-semibold transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1",{primary:"bg-indigo-900 text-white hover:bg-indigo-800 focus:ring-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed",secondary:"bg-indigo-100 text-indigo-900 hover:bg-indigo-200 focus:ring-indigo-300 disabled:text-indigo-400 disabled:bg-indigo-50 disabled:cursor-not-allowed",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 disabled:bg-red-300 disabled:cursor-not-allowed"}[t],a),...l,children:s}),le=e=>`KES ${e?.toLocaleString(void 0,{minimumFractionDigits:2})??"N/A"}`;const ne=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{slug:t}=j(),[r,i]=g.useState(0),[l,n]=g.useState(!1),[c,o]=g.useState(1),[x,h]=g.useState(!1),{addToCart:u}=K(),{product:y,loading:b,error:N,refresh:v}=m(t),{products:w}=d();(e=>{const[s,a]=g.useState(!1),t=g.useCallback(async()=>{if(e){a(!0);try{await Z.preloadRelatedData(e)}catch(N){}finally{a(!1)}}},[e]);g.useEffect(()=>{t()},[t])})(y?.id);const C=y?{...y,images:y.images||(y.image_url?[y.image_url]:[])}:null,S=w?.filter(e=>e.category===C?.category&&e.id!==C?.id).slice(0,4)||[],k=[{label:"Products",href:"/browse"},...C?.category?[{label:C.category.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase()),href:`/category/${C.category}`}]:[],{label:C?.name||"Product",href:"#"}];return b?e.jsx(ae,{}):N?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-red-600 text-xl",children:[e.jsxs("p",{children:["Error: ",N]}),e.jsxs("button",{onClick:v,className:"mt-4 flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(f,{className:"h-4 w-4"}),"Try Again"]})]}):C?e.jsx("main",{className:"min-h-screen bg-gray-50",children:e.jsxs(G,{className:"py-8",children:[e.jsx(re,{items:k}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 mb-12",children:[e.jsxs("section",{children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"relative w-full h-80 sm:h-96 lg:h-[400px] rounded-lg overflow-hidden bg-white shadow-sm",children:C.images&&C.images.length>0?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:C.images[r],alt:`${C.name} image ${r+1}`,className:"w-full h-full object-cover"}),C.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{C?.images&&i(e=>(e-1+C.images.length)%C.images.length)},"aria-label":"Previous image",className:"absolute top-1/2 left-4 transform -translate-y-1/2 bg-white/90 hover:bg-white text-gray-800 p-2 rounded-full shadow-sm transition-all duration-200",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{C?.images&&i(e=>(e+1)%C.images.length)},"aria-label":"Next image",className:"absolute top-1/2 right-4 transform -translate-y-1/2 bg-white/90 hover:bg-white text-gray-800 p-2 rounded-full shadow-sm transition-all duration-200",children:e.jsx(P,{className:"w-4 h-4"})})]})]}):e.jsx("div",{className:"flex items-center justify-center w-full h-full bg-gray-100 text-gray-500",children:"No images available"})})}),C.images&&C.images.length>1&&e.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto",children:C.images.map((s,a)=>e.jsx("button",{onClick:()=>i(a),className:"flex-shrink-0 w-16 h-16 rounded-md overflow-hidden border-2 transition-all duration-200 "+(a===r?"border-indigo-600":"border-gray-200 hover:border-gray-300"),children:e.jsx("img",{src:s,alt:`${C.name} thumbnail ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 leading-tight",children:C.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{h(!x)},className:"p-2 rounded-lg transition-colors "+(x?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"),"aria-label":x?"Remove from wishlist":"Add to wishlist",children:e.jsx(L,{className:"w-5 h-5 "+(x?"fill-current":"")})}),e.jsx("button",{onClick:()=>{navigator.share?navigator.share({title:C.name,text:`Check out this ${C.name} - ${le(C.price)}`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),s("Product link copied to clipboard!"))},className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Share product",children:e.jsx($,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(s=>e.jsx(I,{className:"w-4 h-4 text-yellow-400 fill-current"},s))}),e.jsx("span",{className:"text-sm text-gray-500",children:"(4.8) • 127 reviews"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:le(C.price)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:C.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-md",children:[e.jsx("button",{onClick:()=>o(Math.max(1,c-1)),className:"p-2 hover:bg-gray-50 transition-colors",disabled:c<=1,children:e.jsx("span",{className:"text-lg font-medium text-gray-600",children:"−"})}),e.jsx("span",{className:"px-4 py-2 text-sm font-medium min-w-[40px] text-center text-gray-900 border-x border-gray-300",children:c}),e.jsx("button",{onClick:()=>o(c+1),className:"p-2 hover:bg-gray-50 transition-colors",children:e.jsx("span",{className:"text-lg font-medium text-gray-600",children:"+"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:le(C.price*c)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ie,{onClick:()=>{if(!C)return;u({id:C.id,name:C.name,price:C.price,image:C.images?.[0]??"",quantity:c})?s(`${c} item(s) added to cart!`):a("Item is already in your cart.")},className:"flex-1 flex items-center justify-center gap-2 py-3 text-sm font-medium rounded-md",children:[e.jsx(_,{className:"w-4 h-4"}),"Add to Cart"]}),e.jsxs("a",{href:(()=>{if(!C)return"#";const e=`${window.location.origin}/product/${C.slug||t}`,s=`Hi, I'm interested in ${C.name} (KES ${C.price?.toLocaleString()??"N/A"}). ${e}`;return`https://wa.me/+254799590711?text=${encodeURIComponent(s)}`})(),target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 bg-indigo-600 text-white rounded-md px-4 py-3 font-medium hover:bg-indigo-700 transition-colors text-sm",children:[e.jsx(R,{className:"w-4 h-4"}),"Buy Now"]})]}),e.jsxs("a",{href:(()=>{if(!C)return"#";const e=`${window.location.origin}/product/${C.slug||t}`,s=`Check out this item: ${C.name}. ${e}`;return`https://wa.me/?text=${encodeURIComponent(s)}`})(),target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white rounded-md px-4 py-3 font-medium hover:bg-green-700 transition-colors text-sm",children:[e.jsx($,{className:"w-4 h-4"}),"Share on WhatsApp"]})]})]})]})]}),e.jsx("div",{className:"mb-12",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Dimensions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"200cm × 80cm × 90cm"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Weight"}),e.jsx("p",{className:"text-sm text-gray-600",children:"45 kg"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Material"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Solid Wood & Fabric"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Assembly"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Professional Assembly Included"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Warranty"}),e.jsx("p",{className:"text-sm text-gray-600",children:"1 Year Manufacturer Warranty"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Delivery"}),e.jsx("p",{className:"text-sm text-gray-600",children:"3-5 Business Days"})]})]})]})]})}),S.length>0&&e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Similar Products"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:S.map(s=>e.jsxs(p,{to:`/product/${s.slug||s.id}`,className:"group bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[e.jsx("div",{className:"aspect-square overflow-hidden",children:e.jsx("img",{src:s.images?.[0]||s.image_url,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 line-clamp-2 group-hover:text-indigo-600 transition-colors text-sm",children:s.name}),e.jsx("p",{className:"text-indigo-600 font-semibold",children:le(s.price)})]})]},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Need Help?"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Call Us"}),e.jsx("p",{className:"text-sm text-gray-600",children:"+254 711 111 111"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email Us"}),e.jsx("p",{className:"text-sm text-gray-600",children:"info@furniturestore.com"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Business Hours"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Mon-Fri: 8AM-6PM"})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center text-indigo-800 text-xl",children:"Product not found."})}},Symbol.toStringTag,{value:"Module"}));const ce=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{categorySlug:s}=j(),a=g.useMemo(()=>s.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),[s]),{addToCart:t}=K(),{products:r,loading:i,error:l,refresh:n,lastUpdated:c}=x(a),[o,d]=g.useState(""),[m,h]=g.useState("All"),[u,y]=g.useState([0,1e5]),[b,A]=g.useState("relevance"),[P,D]=g.useState("grid"),[L,$]=g.useState(6),I=r.filter(e=>{const s=e.name?.toLowerCase()||"",a=e.type?.toLowerCase()||"",t=o.toLowerCase(),r=""===t||s.includes(t)||a.includes(t),i="All"===m||e.type?.toLowerCase()===m.toLowerCase(),l=e.price>=u[0]&&e.price<=u[1];return r&&i&&l}),R=[...I].sort((e,s)=>{switch(b){case"price-low":return e.price-s.price;case"price-high":return s.price-e.price;case"name":return e.name?.localeCompare(s.name);case"newest":return new Date(s.created_at||0)-new Date(e.created_at||0);default:return 0}}),T=R.slice(0,L),O=()=>{d(""),h("All"),y([0,1e5]),A("relevance"),$(6)},F=()=>{n(),$(6)};return i&&0===r.length?e.jsx("main",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx(G,{children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})})}):e.jsx("main",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs(G,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-bold text-lg",children:a.charAt(0)})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[c&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Last updated: ",new Date(c).toLocaleTimeString()]}),e.jsxs("button",{onClick:F,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Refresh data from server",children:[e.jsx(f,{className:"h-4 w-4 "+(i?"animate-spin":"")}),"Refresh"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[I.length," product",1!==I.length?"s":""," in ",a]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),"Filters"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2 text-sm",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:`Search in ${a}...`,value:o,onChange:e=>d(e.target.value),className:"w-full rounded-lg border border-gray-300 bg-white py-2 pl-10 pr-4 text-sm placeholder-gray-400 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),e.jsx(v,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),o&&e.jsx("button",{onClick:()=>d(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(w,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2 text-sm",children:"Type"}),e.jsx("div",{className:"space-y-2",children:["All","Sofa","Chair","Table","Bed","Bookshelf"].map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:s,checked:m===s,onChange:e=>h(e.target.value),className:"text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:s})]},s))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2 text-sm",children:"Price Range"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:u[0],onChange:e=>y([parseInt(e.target.value)||0,u[1]]),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-indigo-500 focus:outline-none"}),e.jsx("input",{type:"number",placeholder:"Max",value:u[1],onChange:e=>y([u[0],parseInt(e.target.value)||1e5]),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-indigo-500 focus:outline-none"})]})})]}),e.jsx("button",{onClick:O,className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:border-indigo-300 hover:text-indigo-600 transition-colors text-sm font-medium",children:"Clear All Filters"})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("select",{value:b,onChange:e=>A(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:border-indigo-500 focus:outline-none",children:[e.jsx("option",{value:"relevance",children:"Sort by Relevance"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"name",children:"Name: A to Z"}),e.jsx("option",{value:"newest",children:"Newest First"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D("grid"),className:"p-2 rounded-lg "+("grid"===P?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600"),children:e.jsx(C,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>D("list"),className:"p-2 rounded-lg "+("list"===P?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600"),children:e.jsx(S,{className:"h-5 w-5"})})]})]}),l?e.jsxs("div",{className:"text-center py-20",children:[e.jsxs("p",{className:"text-red-600 text-lg mb-4",children:["Error loading products: ",l]}),e.jsx("button",{onClick:F,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]}):0===T.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-gray-400 text-2xl",children:"📦"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No products found"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["No products found in ",a," matching your criteria"]}),e.jsx("button",{onClick:O,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:"Clear Filters"})]}):e.jsx("div",{className:"grid gap-6 "+("grid"===P?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:T.map(s=>{return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-shadow "+("list"===P?"flex gap-6 p-6":"p-6"),children:[e.jsx(p,{to:`/product/${s.slug||s.id}`,className:""+("list"===P?"w-48 flex-shrink-0":""),children:e.jsx("img",{src:s.image_url||s.images?.[0]||"/placeholder-furniture.jpg",alt:s.name,className:"rounded-lg object-cover "+("list"===P?"w-full h-32":"w-full h-48")})}),e.jsxs("div",{className:""+("list"===P?"flex-1":"mt-4"),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 gap-3",children:[e.jsx(p,{to:`/product/${s.slug||s.id}`,className:"text-base font-semibold text-gray-900 hover:text-indigo-600 transition-colors flex-1 min-w-0",title:s.name,children:e.jsx("span",{className:"block truncate",children:s.name})}),e.jsx("span",{className:"text-base font-bold text-indigo-600 flex-shrink-0 whitespace-nowrap",children:(a=s.price,`KES ${a?.toLocaleString(void 0,{minimumFractionDigits:2})??"N/A"}`)})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"capitalize",children:s.category}),s.type&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:s.type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{to:`/product/${s.slug||s.id}`,className:"p-2 text-gray-400 hover:text-indigo-600 transition-colors",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>(e=>{t({id:e.id,name:e.name,price:e.price,image:e.image_url||e.images?.[0],quantity:1})})(s),className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg hover:bg-indigo-200 transition-colors",children:e.jsx(_,{className:"h-4 w-4"})})]})]})]})]},s.id);var a})}),!i&&L<R.length&&e.jsx("div",{className:"flex justify-center mt-12",children:e.jsx("button",{onClick:()=>{$(e=>Math.min(e+6,R.length))},className:"bg-indigo-600 text-white rounded-full px-10 py-3 font-semibold hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-300","aria-label":"Load more products",children:"Load More"})})]})]})]})})}},Symbol.toStringTag,{value:"Module"}));const oe=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[s,a]=y(),[t,r]=g.useState("relevance"),[i,l]=g.useState("grid"),[n,c]=g.useState([0,1e5]),[o,m]=g.useState("all"),{addToCart:x}=K(),{products:h,loading:u}=d(),j=s.get("q")||"",[b,f]=g.useState(j),w=h.filter(e=>{const s=e.name?.toLowerCase().includes(j.toLowerCase())||e.description?.toLowerCase().includes(j.toLowerCase())||e.category?.toLowerCase().includes(j.toLowerCase()),a="all"===o||e.category?.toLowerCase()===o.toLowerCase(),t=e.price>=n[0]&&e.price<=n[1];return s&&a&&t}),A=[...w].sort((e,s)=>{switch(t){case"price-low":return e.price-s.price;case"price-high":return s.price-e.price;case"name":return e.name?.localeCompare(s.name);case"newest":return new Date(s.created_at||0)-new Date(e.created_at||0);default:return 0}});return u?e.jsx("main",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx(G,{children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Searching products..."})]})})}):e.jsx("main",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs(G,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{className:"h-6 w-6 text-indigo-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:j?`Search Results for "${j}"`:"Search Products"})]}),e.jsx("form",{onSubmit:e=>{e.preventDefault(),b.trim()&&a({q:b.trim()})},className:"max-w-2xl",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"search",value:b,onChange:e=>f(e.target.value),placeholder:"Search for furniture, categories, or brands...",className:"w-full rounded-full border border-gray-300 bg-white py-3 pl-12 pr-4 text-lg placeholder-gray-400 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20"}),e.jsx(v,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-indigo-600 text-white px-6 py-2 rounded-full hover:bg-indigo-700 transition-colors",children:"Search"})]})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[w.length," product",1!==w.length?"s":""," found"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),"Filters"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2 text-sm",children:"Category"}),e.jsx("div",{className:"space-y-2",children:["all","living room","bedroom","office","outdoor"].map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"category",value:s,checked:o===s,onChange:e=>m(e.target.value),className:"text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:"all"===s?"All Categories":s})]},s))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2 text-sm",children:"Price Range"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:n[0],onChange:e=>c([parseInt(e.target.value)||0,n[1]]),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-indigo-500 focus:outline-none"}),e.jsx("input",{type:"number",placeholder:"Max",value:n[1],onChange:e=>c([n[0],parseInt(e.target.value)||1e5]),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-indigo-500 focus:outline-none"})]})})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("select",{value:t,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:border-indigo-500 focus:outline-none",children:[e.jsx("option",{value:"relevance",children:"Sort by Relevance"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"name",children:"Name: A to Z"}),e.jsx("option",{value:"newest",children:"Newest First"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l("grid"),className:"p-2 rounded-lg "+("grid"===i?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600"),children:e.jsx(C,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>l("list"),className:"p-2 rounded-lg "+("list"===i?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600"),children:e.jsx(S,{className:"h-5 w-5"})})]})]}),0===A.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(v,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search terms or filters"}),e.jsx(p,{to:"/browse",className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:"Browse All Products"})]}):e.jsx("div",{className:"grid gap-6 "+("grid"===i?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:A.map(s=>{return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-shadow "+("list"===i?"flex gap-6 p-6":"p-6"),children:[e.jsx(p,{to:`/product/${s.slug||s.id}`,className:""+("list"===i?"w-48 flex-shrink-0":""),children:e.jsx("img",{src:s.image_url||s.images?.[0]||"/placeholder-furniture.jpg",alt:s.name,className:"rounded-lg object-cover "+("list"===i?"w-full h-32":"w-full h-48")})}),e.jsxs("div",{className:""+("list"===i?"flex-1":"mt-4"),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 gap-3",children:[e.jsx(p,{to:`/product/${s.slug||s.id}`,className:"text-base font-semibold text-gray-900 hover:text-indigo-600 transition-colors flex-1 min-w-0",title:s.name,children:e.jsx("span",{className:"block truncate",children:s.name})}),e.jsx("span",{className:"text-base font-bold text-indigo-600 flex-shrink-0 whitespace-nowrap",children:(a=s.price,`KES ${a?.toLocaleString(void 0,{minimumFractionDigits:2})??"N/A"}`)})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 capitalize",children:s.category}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{to:`/product/${s.slug||s.id}`,className:"p-2 text-gray-400 hover:text-indigo-600 transition-colors",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>(e=>{x({id:e.id,name:e.name,price:e.price,image:e.image_url||e.images?.[0],quantity:1})})(s),className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg hover:bg-indigo-200 transition-colors",children:e.jsx(_,{className:"h-4 w-4"})})]})]})]})]},s.id);var a})})]})]})]})})}},Symbol.toStringTag,{value:"Module"}));export{te as B,G as C,ee as F,X as P,se as S,J as a,V as b,ne as c,ce as d,oe as e,K as u};
